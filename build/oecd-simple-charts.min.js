!function(a,b){typeof exports==='object'&&typeof module!=='undefined'?b(exports):typeof define==='function'&&define.amd?define(['exports'],b):(b((a.OECDCharts={})))}(this,(function(u){'use strict';var z="http://www.w3.org/1999/xhtml",A={svg:"http://www.w3.org/2000/svg",xhtml:z,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function B(a){var b=a+="",c=b.indexOf(":");c>=0&&(b=a.slice(0,c))!=="xmlns"&&(a=a.slice(c+1));return A.hasOwnProperty(b)?{space:A[b],local:a}:a}function C(a){return function(){var b=this.ownerDocument,c=this.namespaceURI;return c===z&&b.documentElement.namespaceURI===z?b.createElement(a):b.createElementNS(c,a)}}function D(a){return function(){return this.ownerDocument.createElementNS(a.space,a.local)}}function E(a){var b=B(a);return(b.local?D:C)(b)}function F(){}function G(a){return a==null?F:function(){return this.querySelector(a)}}function H(a){typeof a!=="function"&&(a=G(a));for(var b=this._groups,c=b.length,d=new Array(c),e=0;e<c;++e){for(var f=b[e],g=f.length,h=d[e]=new Array(g),i,j,k=0;k<g;++k)(i=f[k])&&(j=a.call(i,i.__data__,k,f))&&("__data__" in i&&(j.__data__=i.__data__),h[k]=j)}return new bo(d,this._parents)}function I(){return[]}function J(a){return a==null?I:function(){return this.querySelectorAll(a)}}function K(a){typeof a!=="function"&&(a=J(a));for(var b=this._groups,c=b.length,d=[],e=[],f=0;f<c;++f){for(var g=b[f],h=g.length,i,j=0;j<h;++j)(i=g[j])&&(d.push(a.call(i,i.__data__,j,g)),e.push(i))}return new bo(d,e)}var L=function(a){return function(){return this.matches(a)}};if(typeof document!=="undefined"){var M=document.documentElement;if(!M.matches){var N=M.webkitMatchesSelector||M.msMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector;L=function(a){return function(){return N.call(this,a)}}}}var O=L;function P(a){typeof a!=="function"&&(a=O(a));for(var b=this._groups,c=b.length,d=new Array(c),e=0;e<c;++e){for(var f=b[e],g=f.length,h=d[e]=[],i,j=0;j<g;++j)(i=f[j])&&a.call(i,i.__data__,j,f)&&h.push(i)}return new bo(d,this._parents)}function Q(a){return new Array(a.length)}function R(){return new bo(this._enter||this._groups.map(Q),this._parents)}function S(a,b){this.ownerDocument=a.ownerDocument;this.namespaceURI=a.namespaceURI;this._next=null;this._parent=a;this.__data__=b}S.prototype={constructor:S,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,b){return this._parent.insertBefore(a,b)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};function T(a){return function(){return a}}var U="$";function V(a,b,c,d,e,f){var g=0,h,i=b.length,j=f.length;for(;g<j;++g)(h=b[g])?(h.__data__=f[g],d[g]=h):(c[g]=new S(a,f[g]));for(;g<i;++g)(h=b[g])&&(e[g]=h)}function W(a,b,c,d,e,f,g){var h,i,j={},k=b.length,l=f.length,m=new Array(k),n;for(h=0;h<k;++h)(i=b[h])&&(m[h]=n=U+g.call(i,i.__data__,h,b),n in j?(e[h]=i):(j[n]=i));for(h=0;h<l;++h)n=U+g.call(a,f[h],h,f),(i=j[n])?(d[h]=i,i.__data__=f[h],j[n]=null):(c[h]=new S(a,f[h]));for(h=0;h<k;++h)(i=b[h])&&j[m[h]]===i&&(e[h]=i)}function X(a,b){if(!a){o=new Array(this.size()), k=-1;this.each(function(a){o[++k]=a});return o}var c=b?W:V,e=this._parents,f=this._groups;typeof a!=="function"&&(a=T(a));for(var g=f.length,h=new Array(g),i=new Array(g),j=new Array(g),k=0;k<g;++k){var l=e[k],m=f[k],n=m.length,o=a.call(l,l&&l.__data__,k,e),p=o.length,q=i[k]=new Array(p),r=h[k]=new Array(p),s=j[k]=new Array(n);c(l,m,q,r,s,o,b);for(var t=0,u=0,v,w;t<p;++t){if(v=q[t]){t>=u&&(u=t+1);while(!(w=r[u])&&++u<p);;v._next=w||null}}}h=new bo(h,e);h._enter=i;h._exit=j;return h}function Y(){return new bo(this._exit||this._groups.map(Q),this._parents)}function Z(a){for(var b=this._groups,c=a._groups,d=b.length,e=c.length,f=Math.min(d,e),g=new Array(d),h=0;h<f;++h){for(var i=b[h],j=c[h],k=i.length,l=g[h]=new Array(k),m,n=0;n<k;++n)(m=i[n]||j[n])&&(l[n]=m)}for(;h<d;++h)g[h]=b[h];return new bo(g,this._parents)}function $(){for(var a=this._groups,b=-1,c=a.length;++b<c;){for(var d=a[b],e=d.length-1,f=d[e],g;--e>=0;)(g=d[e])&&(f&&f!==g.nextSibling&&f.parentNode.insertBefore(g,f),f=g)}return this}function aa(c){c||(c=ab);function d(a,b){return a&&b?c(a.__data__,b.__data__):!a-!b}for(var e=this._groups,f=e.length,g=new Array(f),h=0;h<f;++h){for(var i=e[h],j=i.length,k=g[h]=new Array(j),l,m=0;m<j;++m)(l=i[m])&&(k[m]=l);k.sort(d)}return new bo(g,this._parents).order()}function ab(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function ac(){var a=arguments[0];arguments[0]=this;a.apply(null,arguments);return this}function ad(){var a=new Array(this.size()),b=-1;this.each(function(){a[++b]=this});return a}function ae(){for(var a=this._groups,b=0,c=a.length;b<c;++b){for(var d=a[b],e=0,f=d.length;e<f;++e){var g=d[e];if(g)return g}}return null}function af(){var a=0;this.each(function(){++a});return a}function ag(){return!this.node()}function ah(a){for(var b=this._groups,c=0,d=b.length;c<d;++c){for(var e=b[c],f=0,g=e.length,h;f<g;++f)(h=e[f])&&a.call(h,h.__data__,f,e)}return this}function ai(a){return function(){this.removeAttribute(a)}}function aj(a){return function(){this.removeAttributeNS(a.space,a.local)}}function ak(a,b){return function(){this.setAttribute(a,b)}}function al(a,b){return function(){this.setAttributeNS(a.space,a.local,b)}}function am(a,b){return function(){var c=b.apply(this,arguments);c==null?this.removeAttribute(a):this.setAttribute(a,c)}}function an(a,b){return function(){var c=b.apply(this,arguments);c==null?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}}function ao(a,b){var c=B(a);if(arguments.length<2){var d=this.node();return c.local?d.getAttributeNS(c.space,c.local):d.getAttribute(c)}return this.each((b==null?(c.local?aj:ai):(typeof b==="function"?(c.local?an:am):(c.local?al:ak)))(c,b))}function ap(a){return a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView}function aq(a){return function(){this.style.removeProperty(a)}}function ar(a,b,c){return function(){this.style.setProperty(a,b,c)}}function as(a,b,c){return function(){var d=b.apply(this,arguments);d==null?this.style.removeProperty(a):this.style.setProperty(a,d,c)}}function at(a,b,c){return arguments.length>1?this.each((b==null?aq:typeof b==="function"?as:ar)(a,b,c==null?"":c)):au(this.node(),a)}function au(a,b){return a.style.getPropertyValue(b)||ap(a).getComputedStyle(a,null).getPropertyValue(b)}function av(a){return function(){delete this[a]}}function aw(a,b){return function(){this[a]=b}}function ax(a,b){return function(){var c=b.apply(this,arguments);c==null?delete this[a]:(this[a]=c)}}function ay(a,b){return arguments.length>1?this.each((b==null?av:typeof b==="function"?ax:aw)(a,b)):this.node()[a]}function az(a){return a.trim().split(/^|\s+/)}function aA(a){return a.classList||new aB(a)}function aB(a){this._node=a;this._names=az(a.getAttribute("class")||"")}aB.prototype={add:function(a){var b=this._names.indexOf(a);b<0&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){var b=this._names.indexOf(a);b>=0&&(this._names.splice(b,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return this._names.indexOf(a)>=0}};function aC(a,b){var c=aA(a),d=-1,e=b.length;while(++d<e)c.add(b[d])}function aD(a,b){var c=aA(a),d=-1,e=b.length;while(++d<e)c.remove(b[d])}function aE(a){return function(){aC(this,a)}}function aF(a){return function(){aD(this,a)}}function aG(a,b){return function(){(b.apply(this,arguments)?aC:aD)(this,a)}}function aH(a,b){var c=az(a+"");if(arguments.length<2){var d=aA(this.node()),e=-1,f=c.length;while(++e<f)if(!d.contains(c[e]))return !1;return !0}return this.each((typeof b==="function"?aG:b?aE:aF)(c,b))}function aI(){this.textContent=""}function aJ(a){return function(){this.textContent=a}}function aK(a){return function(){var b=a.apply(this,arguments);this.textContent=b==null?"":b}}function aL(a){return arguments.length?this.each(a==null?aI:(typeof a==="function"?aK:aJ)(a)):this.node().textContent}function aM(){this.innerHTML=""}function aN(a){return function(){this.innerHTML=a}}function aO(a){return function(){var b=a.apply(this,arguments);this.innerHTML=b==null?"":b}}function aP(a){return arguments.length?this.each(a==null?aM:(typeof a==="function"?aO:aN)(a)):this.node().innerHTML}function aQ(){this.nextSibling&&this.parentNode.appendChild(this)}function aR(){return this.each(aQ)}function aS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function aT(){return this.each(aS)}function aU(a){var b=typeof a==="function"?a:E(a);return this.select(function(){return this.appendChild(b.apply(this,arguments))})}function aV(){return null}function aW(a,b){var c=typeof a==="function"?a:E(a),d=b==null?aV:typeof b==="function"?b:G(b);return this.select(function(){return this.insertBefore(c.apply(this,arguments),d.apply(this,arguments)||null)})}function aX(){var a=this.parentNode;a&&a.removeChild(this)}function aY(){return this.each(aX)}function aZ(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function a_(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function a$(a){return this.select(a?a_:aZ)}function ba(a){return arguments.length?this.property("__data__",a):this.node().__data__}var bb={};if(typeof document!=="undefined"){var bc=document.documentElement;("onmouseenter" in bc)||(bb={mouseenter:"mouseover",mouseleave:"mouseout"})}function bd(a,b,c){a=be(a,b,c);return function(b){var c=b.relatedTarget;(!c||c!==this&&!(c.compareDocumentPosition(this)&8))&&a.call(this,b)}}function be(a,b,c){return function(d){try{a.call(this,this.__data__,b,c)}finally{}}}function bf(a){return a.trim().split(/^|\s+/).map(function(a){var b="",c=a.indexOf(".");c>=0&&(b=a.slice(c+1), a=a.slice(0,c));return{type:a,name:b}})}function bg(a){return function(){var b=this.__on;if(!b)return;for(var c=0,d=-1,e=b.length,f;c<e;++c)(f=b[c], (!a.type||f.type===a.type)&&f.name===a.name)?this.removeEventListener(f.type,f.listener,f.capture):(b[++d]=f);++d?(b.length=d):delete this.__on}}function bh(a,b,c){var e=bb.hasOwnProperty(a.type)?bd:be;return function(d,f,g){var h=this.__on,i,j=e(b,f,g);if(h)for(var k=0,l=h.length;k<l;++k){if((i=h[k]).type===a.type&&i.name===a.name){this.removeEventListener(i.type,i.listener,i.capture);this.addEventListener(i.type,i.listener=j,i.capture=c);i.value=b;return}};this.addEventListener(a.type,j,c);i={type:a.type,name:a.name,value:b,listener:j,capture:c};h?h.push(i):(this.__on=[i])}}function bi(a,b,c){var d=bf(a+""),e,f=d.length,g;if(arguments.length<2){var h=this.node().__on;if(h)for(var i=0,j=h.length,k;i<j;++i){for(e=0, k=h[i];e<f;++e){if((g=d[e]).type===k.type&&g.name===k.name){return k.value}}};return}h=b?bh:bg;c==null&&(c=!1);for(e=0;e<f;++e)this.each(h(d[e],b,c));return this}function bj(a,b,c){var d=ap(a),e=d.CustomEvent;typeof e==="function"?(e=new e(b,c)):(e=d.document.createEvent("Event"),c?(e.initEvent(b,c.bubbles,c.cancelable), e.detail=c.detail):e.initEvent(b,!1,!1));a.dispatchEvent(e)}function bk(a,b){return function(){return bj(this,a,b)}}function bl(a,b){return function(){return bj(this,a,b.apply(this,arguments))}}function bm(a,b){return this.each((typeof b==="function"?bl:bk)(a,b))}var bn=[null];function bo(a,b){this._groups=a;this._parents=b}function bp(){return new bo([[document.documentElement]],bn)}bo.prototype=bp.prototype={constructor:bo,select:H,selectAll:K,filter:P,data:X,enter:R,exit:Y,merge:Z,order:$,sort:aa,call:ac,nodes:ad,node:ae,size:af,empty:ag,each:ah,attr:ao,style:at,property:ay,classed:aH,text:aL,html:aP,raise:aR,lower:aT,append:aU,insert:aW,remove:aY,clone:a$,datum:ba,on:bi,dispatch:bm};function bq(a){return typeof a==="string"?new bo([[document.querySelector(a)]],[document.documentElement]):new bo([[a]],bn)}var br=Array.prototype.slice;function bs(a){return a}var bt=1,bu=2,bv=3,bw=4,bx=1e-6;function by(a){return"translate("+(a+0.5)+",0)"}function bz(a){return"translate(0,"+(a+0.5)+")"}function bA(a){return function(b){return+a(b)}}function bB(a){var b=Math.max(0,a.bandwidth()-1)/2;a.round()&&(b=Math.round(b));return function(c){return+a(c)+b}}function bC(){return!this.__axis}function bD(a,b){var c=[],e=null,f=null,g=6,h=6,i=3,j=a===bt||a===bw?-1:1,k=a===bw||a===bu?"x":"y",l=a===bt||a===bv?by:bz;function m(m){var n=e==null?(b.ticks?b.ticks.apply(b,c):b.domain()):e,o=f==null?(b.tickFormat?b.tickFormat.apply(b,c):bs):f,p=Math.max(g,0)+i,q=b.range(),r=+q[0]+0.5,s=+q[q.length-1]+0.5,t=(b.bandwidth?bB:bA)(b.copy()),u=m.selection?m.selection():m,v=u.selectAll(".domain").data([null]),w=u.selectAll(".tick").data(n,b).order(),x=w.exit(),y=w.enter().append("g").attr("class","tick"),z=w.select("line"),A=w.select("text");v=v.merge(v.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000"));w=w.merge(y);z=z.merge(y.append("line").attr("stroke","#000").attr(k+"2",j*g));A=A.merge(y.append("text").attr("fill","#000").attr(k,j*p).attr("dy",a===bt?"0em":a===bv?"0.71em":"0.32em"));m!==u&&(v=v.transition(m),w=w.transition(m),z=z.transition(m),A=A.transition(m),x=x.transition(m).attr("opacity",bx).attr("transform",function(a){return isFinite(a=t(a))?l(a):this.getAttribute("transform")}),y.attr("opacity",bx).attr("transform",function(a){var b=this.parentNode.__axis;return l(b&&isFinite(b=b(a))?b:t(a))}));x.remove();v.attr("d",a===bw||a==bu?"M"+j*h+","+r+"H0.5V"+s+"H"+j*h:"M"+r+","+j*h+"V0.5H"+s+"V"+j*h);w.attr("opacity",1).attr("transform",function(a){return l(t(a))});z.attr(k+"2",j*g);A.attr(k,j*p).text(o);u.filter(bC).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",a===bu?"start":a===bw?"end":"middle");u.each(function(){this.__axis=t})}m.scale=function(a){return arguments.length?(b=a, m):b};m.ticks=function(){return c=br.call(arguments), m};m.tickArguments=function(a){return arguments.length?(c=a==null?[]:br.call(a), m):c.slice()};m.tickValues=function(a){return arguments.length?(e=a==null?null:br.call(a), m):e&&e.slice()};m.tickFormat=function(a){return arguments.length?(f=a, m):f};m.tickSize=function(a){return arguments.length?(g=h=+a, m):g};m.tickSizeInner=function(a){return arguments.length?(g=+a, m):g};m.tickSizeOuter=function(a){return arguments.length?(h=+a, m):h};m.tickPadding=function(a){return arguments.length?(i=+a, m):i};return m}function bE(a){return bD(bv,a)}function bF(a,b){if((c=(a=b?a.toExponential(b-1):a.toExponential()).indexOf("e"))<0)return null;var c,d=a.slice(0,c);return[d.length>1?d[0]+d.slice(2):d,+a.slice(c+1)]}function bG(a){return a=bF(Math.abs(a)), a?a[1]:NaN}function bH(a,b){return function(c,d){var e=c.length,f=[],g=0,h=a[0],i=0;while(e>0&&h>0){i+h+1>d&&(h=Math.max(1,d-i));f.push(c.substring(e-=h,e+h));if((i+=h+1)>d)break;h=a[g=(g+1)%a.length]}return f.reverse().join(b)}}function bI(a){return function(b){return b.replace(/[0-9]/g,function(b){return a[+b]})}}function bJ(a,b){a=a.toPrecision(b);out: for(var c=a.length,d=1,e=-1,f;d<c;++d){switch(a[d]){case ".":e=f=d;break;case "0":e===0&&(e=d);f=d;break;case "e":break out;default:e>0&&(e=0);break}};return e>0?a.slice(0,e)+a.slice(f+1):a}var bK;function bL(a,b){var c=bF(a,b);if(!c)return a+"";var d=c[0],e=c[1],f=e-(bK=Math.max(-8,Math.min(8,Math.floor(e/3)))*3)+1,g=d.length;return f===g?d:f>g?d+new Array(f-g+1).join("0"):f>0?d.slice(0,f)+"."+d.slice(f):"0."+new Array(1-f).join("0")+bF(a,Math.max(0,b+f-1))[0]}function bM(a,b){var c=bF(a,b);if(!c)return a+"";var d=c[0],e=c[1];return e<0?"0."+new Array(-e).join("0")+d:d.length>e+1?d.slice(0,e+1)+"."+d.slice(e+1):d+new Array(e-d.length+2).join("0")}var bN={"":bJ,"%":function(a,b){return(a*100).toFixed(b)},"b":function(a){return Math.round(a).toString(2)},"c":function(a){return a+""},"d":function(a){return Math.round(a).toString(10)},"e":function(a,b){return a.toExponential(b)},"f":function(a,b){return a.toFixed(b)},"g":function(a,b){return a.toPrecision(b)},"o":function(a){return Math.round(a).toString(8)},"p":function(a,b){return bM(a*100,b)},"r":bM,"s":bL,"X":function(a){return Math.round(a).toString(16).toUpperCase()},"x":function(a){return Math.round(a).toString(16)}},bO=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function bP(a){return new bQ(a)}bP.prototype=bQ.prototype;function bQ(a){if(!(b=bO.exec(a)))throw new Error("invalid format: "+a);var b,c=b[1]||" ",d=b[2]||">",e=b[3]||"-",f=b[4]||"",g=!!b[5],h=b[6]&&+b[6],i=!!b[7],j=b[8]&&+b[8].slice(1),k=b[9]||"";k==="n"?(i=!0, k="g"):bN[k]||(k="");(g||c==="0"&&d==="=")&&(g=!0, c="0", d="=");this.fill=c;this.align=d;this.sign=e;this.symbol=f;this.zero=g;this.width=h;this.comma=i;this.precision=j;this.type=k}bQ.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+this.type};function bR(a){return a}var bS=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function bT(a){var b=a.grouping&&a.thousands?bH(a.grouping,a.thousands):bR,c=a.currency,d=a.decimal,e=a.numerals?bI(a.numerals):bR,f=a.percent||"%";function g(a){a=bP(a);var g=a.fill,h=a.align,i=a.sign,j=a.symbol,k=a.zero,l=a.width,m=a.comma,n=a.precision,o=a.type,p=j==="$"?c[0]:j==="#"&&/[boxX]/.test(o)?"0"+o.toLowerCase():"",q=j==="$"?c[1]:/[%p]/.test(o)?f:"",r=bN[o],s=!o||/[defgprs%]/.test(o);n=n==null?(o?6:12):/[gprs]/.test(o)?Math.max(1,Math.min(21,n)):Math.max(0,Math.min(20,n));function t(a){var c=p,f=q,j,t,u;if(o==="c")f=r(a)+f,a="";else{a=+a;var v=a<0;a=r(Math.abs(a),n);v&&+a===0&&(v=!1);c=(v?(i==="("?i:"-"):i==="-"||i==="("?"":i)+c;f=(o==="s"?bS[8+bK/3]:"")+f+(v&&i==="("?")":"");if(s){j=-1, t=a.length;while(++j<t){if(u=a.charCodeAt(j), 48>u||u>57){f=(u===46?d+a.slice(j+1):a.slice(j))+f;a=a.slice(0,j);break}}}}m&&!k&&(a=b(a,Infinity));var w=c.length+a.length+f.length,x=w<l?new Array(l-w+1).join(g):"";m&&k&&(a=b(x+a,x.length?l-f.length:Infinity), x="");switch(h){case "<":a=c+a+f+x;break;case "=":a=c+x+a+f;break;case "^":a=x.slice(0,w=x.length>>1)+c+a+f+x.slice(w);break;default:a=x+c+a+f;break};return e(a)}t.toString=function(){return a+""};return t}function h(a,b){var c=g((a=bP(a), a.type="f", a)),d=Math.max(-8,Math.min(8,Math.floor(bG(b)/3)))*3,e=Math.pow(10,-d),f=bS[8+d/3];return function(a){return c(e*a)+f}}return{format:g,formatPrefix:h}}var bU,bV,bW;bX({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function bX(a){bU=bT(a);bV=bU.format;bW=bU.formatPrefix;return bU}function bY(a){return Math.max(0,-bG(Math.abs(a)))}function bZ(a,b){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bG(b)/3)))*3-bG(Math.abs(a)))}function b_(a,b){a=Math.abs(a), b=Math.abs(b)-a;return Math.max(0,bG(b)-bG(a))+1}function b$(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function ca(b){b.length===1&&(b=cb(b));return{left:function(a,c,d,e){d==null&&(d=0);e==null&&(e=a.length);while(d<e){var f=d+e>>>1;b(a[f],c)<0?(d=f+1):(e=f)}return d},right:function(a,c,d,e){d==null&&(d=0);e==null&&(e=a.length);while(d<e){var f=d+e>>>1;b(a[f],c)>0?(e=f):(d=f+1)}return d}}}function cb(a){return function(b,c){return b$(a(b),c)}}var cc=ca(b$),cd=cc.right;function ce(a,b){var c=a.length,d=-1,e,f,g;if(b==null){while(++d<c){if((e=a[d])!=null&&e>=e){f=g=e;while(++d<c)(e=a[d])!=null&&(f>e&&(f=e),g<e&&(g=e))}}}else{while(++d<c){if((e=b(a[d],d,a))!=null&&e>=e){f=g=e;while(++d<c)(e=b(a[d],d,a))!=null&&(f>e&&(f=e),g<e&&(g=e))}}}return[f,g]}function cf(a,b,c){a=+a, b=+b, c=(e=arguments.length)<2?(b=a, a=0, 1):e<3?1:+c;var d=-1,e=Math.max(0,Math.ceil((b-a)/c))|0,f=new Array(e);while(++d<e)f[d]=a+d*c;return f}var cg=Math.sqrt(50),ch=Math.sqrt(10),ci=Math.sqrt(2);function cj(a,b,c){var d,e=-1,f,g,h;b=+b, a=+a, c=+c;if(a===b&&c>0)return[a];(d=b<a)&&(f=a, a=b, b=f);if((h=ck(a,b,c))===0||!isFinite(h))return[];if(h>0){a=Math.ceil(a/h);b=Math.floor(b/h);g=new Array(f=Math.ceil(b-a+1));while(++e<f)g[e]=(a+e)*h}else{a=Math.floor(a*h);b=Math.ceil(b*h);g=new Array(f=Math.ceil(a-b+1));while(++e<f)g[e]=(a-e)/h}d&&g.reverse();return g}function ck(a,b,c){var d=(b-a)/Math.max(0,c),e=Math.floor(Math.log(d)/Math.LN10),f=d/Math.pow(10,e);return e>=0?(f>=cg?10:f>=ch?5:f>=ci?2:1)*Math.pow(10,e):-Math.pow(10,-e)/(f>=cg?10:f>=ch?5:f>=ci?2:1)}function cl(a,b,c){var d=Math.abs(b-a)/Math.max(0,c),e=Math.pow(10,Math.floor(Math.log(d)/Math.LN10)),f=d/e;f>=cg?(e*=10):f>=ch?(e*=5):f>=ci&&(e*=2);return b<a?-e:e}function cm(a,b){var c=a.length,d=-1,e,f;if(b==null){while(++d<c){if((e=a[d])!=null&&e>=e){f=e;while(++d<c)(e=a[d])!=null&&e>f&&(f=e)}}}else{while(++d<c){if((e=b(a[d],d,a))!=null&&e>=e){f=e;while(++d<c)(e=b(a[d],d,a))!=null&&e>f&&(f=e)}}}return f}function cn(a,b){var c=a.length,d=-1,e,f=0;if(b==null){while(++d<c)(e=+a[d])&&(f+=e)}else{while(++d<c)(e=+b(a[d],d,a))&&(f+=e)}return f}var co="$";function cp(){}cp.prototype=cq.prototype={constructor:cp,has:function(a){return co+a in this},get:function(a){return this[co+a]},set:function(a,b){this[co+a]=b;return this},remove:function(a){var b=co+a;return b in this&&delete this[b]},clear:function(){for(y in this)property[0]===prefix&&delete this[property]},keys:function(){var a=[];for(y in this)property[0]===prefix&&keys.push(property.slice(1));return a},values:function(){var a=[];for(y in this)property[0]===prefix&&values.push(this[property]);return a},entries:function(){var a=[];for(y in this)property[0]===prefix&&entries.push({key:property.slice(1),value:this[property]});return a},size:function(){var a=0;for(y in this)property[0]===prefix&&++size;return a},empty:function(){for(y in this)if(property[0]===prefix)return !1;return !0},each:function(a){for(y in this)property[0]===prefix&&f(this[property],property.slice(1),this)}};function cq(a,b){var c=new cp;if(a instanceof cp)a.each(function(a,b){c.set(b,a)});else if(Array.isArray(a)){var d=-1,e=a.length,f;if(b==null)while(++d<e)c.set(d,a[d]);else while(++d<e)c.set(b(f=a[d],d,a),f)}else if(a)for(var g in a)c.set(g,a[g]);return c}function cr(){}var cs=cq.prototype;cr.prototype=ct.prototype={constructor:cr,has:cs.has,add:function(a){a+="";this[co+a]=a;return this},remove:cs.remove,clear:cs.clear,values:cs.keys,size:cs.size,empty:cs.empty,each:cs.each};function ct(a,b){var c=new cr;if(a instanceof cr)a.each(function(a){c.add(a)});else if(a){var d=-1,e=a.length;if(b==null)while(++d<e)c.add(a[d]);else while(++d<e)c.add(b(a[d],d,a))};return c}var cu=Array.prototype,cv=cu.map,cw=cu.slice;function cx(a,b,c){a.prototype=b.prototype=c;c.constructor=a}function cy(a,b){var c=Object.create(a.prototype);for(var d in b)c[d]=b[d];return c}function cz(){}var cA=0.7,cB=1/cA,cC="\\s*([+-]?\\d+)\\s*",cD="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",cE="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cF=/^#([0-9a-f]{3})$/,cG=/^#([0-9a-f]{6})$/,cH=new RegExp("^rgb\\([object Object]\\)$"),cI=new RegExp("^rgb\\([object Object]\\)$"),cJ=new RegExp("^rgba\\([object Object]\\)$"),cK=new RegExp("^rgba\\([object Object]\\)$"),cL=new RegExp("^hsl\\([object Object]\\)$"),cM=new RegExp("^hsla\\([object Object]\\)$"),cN={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:0x00ffff,aquamarine:0x7fffd4,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0x000000,blanchedalmond:0xffebcd,blue:0x0000ff,blueviolet:0x8a2be2,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:0x5f9ea0,chartreuse:0x7fff00,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:0x6495ed,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:0x00ffff,darkblue:0x00008b,darkcyan:0x008b8b,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:0x006400,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:0x8b008b,darkolivegreen:0x556b2f,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:0x8b0000,darksalmon:0xe9967a,darkseagreen:0x8fbc8f,darkslateblue:0x483d8b,darkslategray:0x2f4f4f,darkslategrey:0x2f4f4f,darkturquoise:0x00ced1,darkviolet:0x9400d3,deeppink:0xff1493,deepskyblue:0x00bfff,dimgray:0x696969,dimgrey:0x696969,dodgerblue:0x1e90ff,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:0x228b22,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:0x808080,green:0x008000,greenyellow:0xadff2f,grey:0x808080,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:0x4b0082,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:0x7cfc00,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:0x90ee90,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:0x20b2aa,lightskyblue:0x87cefa,lightslategray:0x778899,lightslategrey:0x778899,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:0x00ff00,limegreen:0x32cd32,linen:0xfaf0e6,magenta:0xff00ff,maroon:0x800000,mediumaquamarine:0x66cdaa,mediumblue:0x0000cd,mediumorchid:0xba55d3,mediumpurple:0x9370db,mediumseagreen:0x3cb371,mediumslateblue:0x7b68ee,mediumspringgreen:0x00fa9a,mediumturquoise:0x48d1cc,mediumvioletred:0xc71585,midnightblue:0x191970,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:0x000080,oldlace:0xfdf5e6,olive:0x808000,olivedrab:0x6b8e23,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:0x800080,rebeccapurple:0x663399,red:0xff0000,rosybrown:0xbc8f8f,royalblue:0x4169e1,saddlebrown:0x8b4513,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:0x2e8b57,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:0x87ceeb,slateblue:0x6a5acd,slategray:0x708090,slategrey:0x708090,snow:0xfffafa,springgreen:0x00ff7f,steelblue:0x4682b4,tan:0xd2b48c,teal:0x008080,thistle:0xd8bfd8,tomato:0xff6347,turquoise:0x40e0d0,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};cx(cz,cO,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}});function cO(a){var b;a=(a+"").trim().toLowerCase();return(b=cF.exec(a))?(b=parseInt(b[1],16), new cT(b>>8&0xf|b>>4&0x0f0,b>>4&0xf|b&0xf0,(b&0xf)<<4|b&0xf,1)):(b=cG.exec(a))?cP(parseInt(b[1],16)):(b=cH.exec(a))?new cT(b[1],b[2],b[3],1):(b=cI.exec(a))?new cT(b[1]*255/100,b[2]*255/100,b[3]*255/100,1):(b=cJ.exec(a))?cQ(b[1],b[2],b[3],b[4]):(b=cK.exec(a))?cQ(b[1]*255/100,b[2]*255/100,b[3]*255/100,b[4]):(b=cL.exec(a))?cV(b[1],b[2]/100,b[3]/100,1):(b=cM.exec(a))?cV(b[1],b[2]/100,b[3]/100,b[4]):cN.hasOwnProperty(a)?cP(cN[a]):a==="transparent"?new cT(NaN,NaN,NaN,0):null}function cP(a){return new cT(a>>16&0xff,a>>8&0xff,a&0xff,1)}function cQ(a,b,c,d){d<=0&&(a=b=c=NaN);return new cT(a,b,c,d)}function cR(a){(a instanceof cz)||(a=cO(a));if(!a)return new cT;a=a.rgb();return new cT(a.r,a.g,a.b,a.opacity)}function cS(a,b,c,d){return arguments.length===1?cR(a):new cT(a,b,c,d==null?1:d)}function cT(a,b,c,d){this.r=+a;this.g=+b;this.b=+c;this.opacity=+d}cx(cT,cS,cy(cz,{brighter:function(a){a=a==null?cB:Math.pow(cB,a);return new cT(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){a=a==null?cA:Math.pow(cA,a);return new cT(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&(0<=this.g&&this.g<=255)&&(0<=this.b&&this.b<=255)&&(0<=this.opacity&&this.opacity<=1)},hex:function(){return"#"+cU(this.r)+cU(this.g)+cU(this.b)},toString:function(){var a=this.opacity;a=isNaN(a)?1:Math.max(0,Math.min(1,a));return(a===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(a===1?")":", "+a+")")}}));function cU(a){a=Math.max(0,Math.min(255,Math.round(a)||0));return(a<16?"0":"")+a.toString(16)}function cV(a,b,c,d){d<=0?(a=b=c=NaN):c<=0||c>=1?(a=b=NaN):b<=0&&(a=NaN);return new cY(a,b,c,d)}function cW(a){if(a instanceof cY)return new cY(a.h,a.s,a.l,a.opacity);(a instanceof cz)||(a=cO(a));if(!a)return new cY;if(a instanceof cY)return a;a=a.rgb();var b=a.r/255,c=a.g/255,d=a.b/255,e=Math.min(b,c,d),f=Math.max(b,c,d),g=NaN,h=f-e,i=(f+e)/2;h?(b===f?(g=(c-d)/h+(c<d)*6):c===f?(g=(d-b)/h+2):(g=(b-c)/h+4),h/=i<0.5?f+e:2-f-e,g*=60):(h=i>0&&i<1?0:g);return new cY(g,h,i,a.opacity)}function cX(a,b,c,d){return arguments.length===1?cW(a):new cY(a,b,c,d==null?1:d)}function cY(a,b,c,d){this.h=+a;this.s=+b;this.l=+c;this.opacity=+d}cx(cY,cX,cy(cz,{brighter:function(a){a=a==null?cB:Math.pow(cB,a);return new cY(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=a==null?cA:Math.pow(cA,a);return new cY(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=this.h%360+(this.h<0)*360,b=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l,d=c+(c<0.5?c:1-c)*b,e=2*c-d;return new cT(cZ(a>=240?a-240:a+120,e,d),cZ(a,e,d),cZ(a<120?a+240:a-120,e,d),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)}}));function cZ(a,b,c){return(a<60?b+(c-b)*a/60:a<180?c:a<240?b+(c-b)*(240-a)/60:b)*255}var c_=Math.PI/180,c$=180/Math.PI,da=18,db=0.96422,dc=1,dd=0.82521,de=0.13793103448275862,df=0.20689655172413793,dg=3*df*df,dh=df*df*df;function di(a){if(a instanceof dk)return new dk(a.l,a.a,a.b,a.opacity);if(a instanceof ds){if(isNaN(a.h))return new dk(a.l,0,0,a.opacity);var b=a.h*c_;return new dk(a.l,Math.cos(b)*a.c,Math.sin(b)*a.c,a.opacity)}(a instanceof cT)||(a=cR(a));var c=dp(a.r),d=dp(a.g),e=dp(a.b),f=dl((0.2225045*c+0.7168786*d+0.0606169*e)/dc),g,h;c===d&&d===e?(g=h=f):(g=dl((0.4360747*c+0.3850649*d+0.1430804*e)/db),h=dl((0.0139322*c+0.0971045*d+0.7141733*e)/dd));return new dk(116*f-16,500*(g-f),200*(f-h),a.opacity)}function dj(a,b,c,d){return arguments.length===1?di(a):new dk(a,b,c,d==null?1:d)}function dk(a,b,c,d){this.l=+a;this.a=+b;this.b=+c;this.opacity=+d}cx(dk,dj,cy(cz,{brighter:function(a){return new dk(this.l+da*(a==null?1:a),this.a,this.b,this.opacity)},darker:function(a){return new dk(this.l-da*(a==null?1:a),this.a,this.b,this.opacity)},rgb:function(){var a=(this.l+16)/116,b=isNaN(this.a)?a:a+this.a/500,c=isNaN(this.b)?a:a-this.b/200;b=db*dm(b);a=dc*dm(a);c=dd*dm(c);return new cT(dn(3.1338561*b-1.6168667*a-0.4906146*c),dn(-0.9787684*b+1.9161415*a+0.0334540*c),dn(0.0719453*b-0.2289914*a+1.4052427*c),this.opacity)}}));function dl(a){return a>dh?Math.pow(a,0.3333333333333333):a/dg+de}function dm(a){return a>df?a*a*a:dg*(a-de)}function dn(a){return 255*(a<=0.0031308?12.92*a:1.055*Math.pow(a,0.4166666666666667)-0.055)}function dp(a){return(a/=255)<=0.04045?a/12.92:Math.pow((a+0.055)/1.055,2.4)}function dq(a){if(a instanceof ds)return new ds(a.h,a.c,a.l,a.opacity);(a instanceof dk)||(a=di(a));if(a.a===0&&a.b===0)return new ds(NaN,0,a.l,a.opacity);var b=Math.atan2(a.b,a.a)*c$;return new ds(b<0?b+360:b,Math.sqrt(a.a*a.a+a.b*a.b),a.l,a.opacity)}function dr(a,b,c,d){return arguments.length===1?dq(a):new ds(a,b,c,d==null?1:d)}function ds(a,b,c,d){this.h=+a;this.c=+b;this.l=+c;this.opacity=+d}cx(ds,dr,cy(cz,{brighter:function(a){return new ds(this.h,this.c,this.l+da*(a==null?1:a),this.opacity)},darker:function(a){return new ds(this.h,this.c,this.l-da*(a==null?1:a),this.opacity)},rgb:function(){return di(this).rgb()}}));var dt=-0.14861,du=1.78277,dv=-0.29227,dw=-0.90649,dx=1.97294,dy=dx*dw,dz=dx*du,dA=du*dv-dw*dt;function dB(a){if(a instanceof dD)return new dD(a.h,a.s,a.l,a.opacity);(a instanceof cT)||(a=cR(a));var b=a.r/255,c=a.g/255,d=a.b/255,e=(dA*d+dy*b-dz*c)/(dA+dy-dz),f=d-e,g=(dx*(c-e)-dv*f)/dw,h=Math.sqrt(g*g+f*f)/(dx*e*(1-e)),i=h?Math.atan2(g,f)*c$-120:NaN;return new dD(i<0?i+360:i,h,e,a.opacity)}function dC(a,b,c,d){return arguments.length===1?dB(a):new dD(a,b,c,d==null?1:d)}function dD(a,b,c,d){this.h=+a;this.s=+b;this.l=+c;this.opacity=+d}cx(dD,dC,cy(cz,{brighter:function(a){a=a==null?cB:Math.pow(cB,a);return new dD(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=a==null?cA:Math.pow(cA,a);return new dD(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=isNaN(this.h)?0:(this.h+120)*c_,b=+this.l,c=isNaN(this.s)?0:this.s*b*(1-b),d=Math.cos(a),e=Math.sin(a);return new cT(255*(b+c*(dt*d+du*e)),255*(b+c*(dv*d+dw*e)),255*(b+c*(dx*d)),this.opacity)}}));function dE(a){return function(){return a}}function dF(a,b){return function(c){return a+c*b}}function dG(a,b,c){return a=Math.pow(a,c), b=Math.pow(b,c)-a, c=1/c, function(d){return Math.pow(a+d*b,c)}}function dH(c){return(c=+c)===1?dI:function(a,b){return b-a?dG(a,b,c):dE(isNaN(a)?b:a)}}function dI(a,b){var c=b-a;return c?dF(a,c):dE(isNaN(a)?b:a)}var dJ=(function b(a){var c=dH(a);function d(a,b){var d=c((a=cS(a)).r,(b=cS(b)).r),e=c(a.g,b.g),f=c(a.b,b.b),g=dI(a.opacity,b.opacity);return function(b){a.r=d(b);a.g=e(b);a.b=f(b);a.opacity=g(b);return a+""}}d.gamma=b;return d})(1);function dK(a,b){var c=b?b.length:0,d=a?Math.min(c,a.length):0,e=new Array(d),f=new Array(c),g;for(g=0;g<d;++g)e[g]=dT(a[g],b[g]);for(;g<c;++g)f[g]=b[g];return function(a){for(g=0;g<d;++g)f[g]=e[g](a);return f}}function dL(a,b){var c=new Date;return a=+a, b-=a, function(d){return c.setTime(a+b*d), c}}function dM(a,b){return a=+a, b-=a, function(c){return a+b*c}}function dN(a,b){var c={},d={},e;(a===null||typeof a!=="object")&&(a={});(b===null||typeof b!=="object")&&(b={});for(e in b)e in a?(c[e]=dT(a[e],b[e])):(d[e]=b[e]);return function(a){for(e in c)d[e]=c[e](a);return d}}var dO=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dP=new RegExp(dO.source,"g");function dQ(a){return function(){return a}}function dR(a){return function(b){return a(b)+""}}function dS(a,b){var c=dO.lastIndex=dP.lastIndex=0,d,e,f,g=-1,h=[],i=[];a+="", b+="";while((d=dO.exec(a))&&(e=dP.exec(b)))(f=e.index)>c&&(f=b.slice(c,f),h[g]?(h[g]+=f):(h[++g]=f)),(d=d[0])===(e=e[0])?(h[g]?(h[g]+=e):(h[++g]=e)):(h[++g]=null,i.push({i:g,x:dM(d,e)})),c=dP.lastIndex;c<b.length&&(f=b.slice(c),h[g]?(h[g]+=f):(h[++g]=f));return h.length<2?(i[0]?dR(i[0].x):dQ(b)):(b=i.length, function(a){for(var c=0,d;c<b;++c)h[(d=i[c]).i]=d.x(a);return h.join("")})}function dT(a,b){var c=typeof b,d;return b==null||c==="boolean"?dE(b):(c==="number"?dM:c==="string"?((d=cO(b))?(b=d, dJ):dS):b instanceof cO?dJ:b instanceof Date?dL:Array.isArray(b)?dK:typeof b.valueOf!=="function"&&typeof b.toString!=="function"||isNaN(b)?dN:dM)(a,b)}function dU(a,b){return a=+a, b-=a, function(c){return Math.round(a+b*c)}}var dV=180/Math.PI,dW={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function dX(a,b,c,d,e,f){var g,h,i;(g=Math.sqrt(a*a+b*b))&&(a/=g, b/=g);(i=a*c+b*d)&&(c-=a*i, d-=b*i);(h=Math.sqrt(c*c+d*d))&&(c/=h, d/=h, i/=h);a*d<b*c&&(a=-a, b=-b, i=-i, g=-g);return{translateX:e,translateY:f,rotate:Math.atan2(b,a)*dV,skewX:Math.atan(i)*dV,scaleX:g,scaleY:h}}var dY,dZ,d_,d$;function ea(a){if(a==="none")return dW;dY||(dY=document.createElement("DIV"), dZ=document.documentElement, d_=document.defaultView);dY.style.transform=a;a=d_.getComputedStyle(dZ.appendChild(dY),null).getPropertyValue("transform");dZ.removeChild(dY);a=a.slice(7,-1).split(",");return dX(+a[0],+a[1],+a[2],+a[3],+a[4],+a[5])}function eb(a){if(a==null)return dW;d$||(d$=document.createElementNS("http://www.w3.org/2000/svg","g"));d$.setAttribute("transform",a);if(!(a=d$.transform.baseVal.consolidate()))return dW;a=a.matrix;return dX(a.a,a.b,a.c,a.d,a.e,a.f)}function ec(c,d,e,f){function g(a){return a.length?a.pop()+" ":""}function h(a,b,c,f,g,h){if(a!==c||b!==f){var i=g.push("translate(",null,d,null,e);h.push({i:i-4,x:dM(a,c)},{i:i-2,x:dM(b,f)})}else (c||f)&&g.push("translate("+c+d+f+e)}function i(a,b,c,d){a!==b?(a-b>180?(b+=360):b-a>180&&(a+=360),d.push({i:c.push(g(c)+"rotate(",null,f)-2,x:dM(a,b)})):b&&c.push(g(c)+"rotate("+b+f)}function j(a,b,c,d){a!==b?d.push({i:c.push(g(c)+"skewX(",null,f)-2,x:dM(a,b)}):b&&c.push(g(c)+"skewX("+b+f)}function k(a,b,c,d,e,f){if(a!==c||b!==d){var h=e.push(g(e)+"scale(",null,",",null,")");f.push({i:h-4,x:dM(a,c)},{i:h-2,x:dM(b,d)})}else (c!==1||d!==1)&&e.push(g(e)+"scale("+c+","+d+")")}return function(a,b){var d=[],e=[];a=c(a), b=c(b);h(a.translateX,a.translateY,b.translateX,b.translateY,d,e);i(a.rotate,b.rotate,d,e);j(a.skewX,b.skewX,d,e);k(a.scaleX,a.scaleY,b.scaleX,b.scaleY,d,e);a=b=null;return function(a){var b=-1,c=e.length,f;while(++b<c)d[(f=e[b]).i]=f.x(a);return d.join("")}}}var ed=ec(ea,"px, ","px)","deg)"),ee=ec(eb,", ",")",")");function eg(a){return function(){return a}}function eh(a){return+a}var ei=[0,1];function ej(a,b){return(b-=a=+a)?function(c){return(c-a)/b}:eg(b)}function ek(c){return function(a,b){var d=c(a=+a,b=+b);return function(c){return c<=a?0:c>=b?1:d(c)}}}function el(c){return function(a,b){var d=c(a=+a,b=+b);return function(c){return c<=0?a:c>=1?b:d(c)}}}function em(a,b,c,d){var e=a[0],f=a[1],g=b[0],h=b[1];f<e?(e=c(f,e), g=d(h,g)):(e=c(e,f), g=d(g,h));return function(a){return g(e(a))}}function en(a,b,c,d){var e=Math.min(a.length,b.length)-1,f=new Array(e),g=new Array(e),h=-1;a[e]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());while(++h<e)f[h]=c(a[h],a[h+1]),g[h]=d(b[h],b[h+1]);return function(b){var c=cd(a,b,1,e)-1;return g[c](f[c](b))}}function eo(a,b){return b.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp())}function ep(a,b){var c=ei,d=ei,e=dT,f=!1,g,h,i;function j(){g=Math.min(c.length,d.length)>2?en:em;h=i=null;return k}function k(b){return(h||(h=g(c,d,f?ek(a):a,e)))(+b)}k.invert=function(a){return(i||(i=g(d,c,ej,f?el(b):b)))(+a)};k.domain=function(a){return arguments.length?(c=cv.call(a,eh), j()):c.slice()};k.range=function(a){return arguments.length?(d=cw.call(a), j()):d.slice()};k.rangeRound=function(a){return d=cw.call(a), e=dU, j()};k.clamp=function(a){return arguments.length?(f=!!a, j()):f};k.interpolate=function(a){return arguments.length?(e=a, j()):e};return j()}function eq(a,b,c){var d=a[0],e=a[a.length-1],f=cl(d,e,b==null?10:b),g;c=bP(c==null?",f":c);switch(c.type){case "s":{var h=Math.max(Math.abs(d),Math.abs(e));c.precision==null&&!isNaN(g=bZ(f,h))&&(c.precision=g);return bW(c,h)};case "":;case "e":;case "g":;case "p":;case "r":{c.precision==null&&!isNaN(g=b_(f,Math.max(Math.abs(d),Math.abs(e))))&&(c.precision=g-(c.type==="e"));break};case "f":;case "%":{c.precision==null&&!isNaN(g=bY(f))&&(c.precision=g-(c.type==="%")*2);break}};return bV(c)}function er(a){var b=a.domain;a.ticks=function(a){var c=b();return cj(c[0],c[c.length-1],a==null?10:a)};a.tickFormat=function(a,c){return eq(b(),a,c)};a.nice=function(c){c==null&&(c=10);var d=b(),e=0,f=d.length-1,g=d[e],h=d[f],i;h<g&&(i=g, g=h, h=i,i=e, e=f, f=i);i=ck(g,h,c);i>0?(g=Math.floor(g/i)*i,h=Math.ceil(h/i)*i,i=ck(g,h,c)):i<0&&(g=Math.ceil(g*i)/i,h=Math.floor(h*i)/i,i=ck(g,h,c));i>0?(d[e]=Math.floor(g/i)*i,d[f]=Math.ceil(h/i)*i,b(d)):i<0&&(d[e]=Math.ceil(g*i)/i,d[f]=Math.floor(h*i)/i,b(d));return a};return a}function es(){var a=ep(ej,dM);a.copy=function(){return eo(a,es())};return er(a)}function et(){var a=0,b=1,c=1,d=[0.5],e=[0,1];function f(a){if(a<=a)return e[cd(d,a,0,c)]}function g(){var e=-1;d=new Array(c);while(++e<c)d[e]=((e+1)*b-(e-c)*a)/(c+1);return f}f.domain=function(c){return arguments.length?(a=+c[0], b=+c[1], g()):[a,b]};f.range=function(a){return arguments.length?(c=(e=cw.call(a)).length-1, g()):e.slice()};f.invertExtent=function(f){var g=e.indexOf(f);return g<0?[NaN,NaN]:g<1?[a,d[0]]:g>=c?[d[c-1],b]:[d[g-1],d[g]]};f.copy=function(){return et().domain([a,b]).range(e)};return er(f)}var eu=new Date,ev=new Date;function ew(a,b,c,e){function f(b){return a(b=new Date(+b)), b}f.floor=f;f.ceil=function(c){return a(c=new Date(c-1)), b(c,1), a(c), c};f.round=function(a){var b=f(a),c=f.ceil(a);return a-b<c-a?b:c};f.offset=function(a,c){return b(a=new Date(+a),c==null?1:Math.floor(c)), a};f.range=function(c,d,e){var g=[],h;c=f.ceil(c);e=e==null?1:Math.floor(e);if(!(c<d)||!(e>0))return g;do{g.push(h=new Date(+c)), b(c,e), a(c)}while(h<c&&c<d);return g};f.filter=function(c){return ew(function(b){if(b>=b)while(a(b), !c(b))b.setTime(b-1)},function(a,d){if(a>=a){if(d<0)while(++d<=0){while(b(a,-1), !c(a));}else while(--d>=0){while(b(a,1), !c(a));}}})};c&&(f.count=function(b,d){eu.setTime(+b), ev.setTime(+d);a(eu), a(ev);return Math.floor(c(eu,ev))},f.every=function(a){a=Math.floor(a);return!isFinite(a)||!(a>0)?null:!(a>1)?f:f.filter(e?function(b){return e(b)%a===0}:function(b){return f.count(0,b)%a===0})});return f}var ex=ew(function(){},function(a,b){a.setTime(+a+b)},function(a,b){return b-a});ex.every=function(a){a=Math.floor(a);if(!isFinite(a)||!(a>0))return null;if(!(a>1))return ex;return ew(function(b){b.setTime(Math.floor(b/a)*a)},function(b,c){b.setTime(+b+c*a)},function(b,c){return(c-b)/a})};var ez=6e4,eB=864e5,eC=6048e5,eG=ew(function(a){a.setHours(0,0,0,0)},function(a,b){a.setDate(a.getDate()+b)},function(a,b){return(b-a-(b.getTimezoneOffset()-a.getTimezoneOffset())*ez)/eB},function(a){return a.getDate()-1});function eH(a){return ew(function(b){b.setDate(b.getDate()-(b.getDay()+7-a)%7);b.setHours(0,0,0,0)},function(a,b){a.setDate(a.getDate()+b*7)},function(a,b){return(b-a-(b.getTimezoneOffset()-a.getTimezoneOffset())*ez)/eC})}var eI=eH(0),eJ=eH(1),eM=eH(4),eQ=ew(function(a){a.setMonth(0,1);a.setHours(0,0,0,0)},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a,b){return b.getFullYear()-a.getFullYear()},function(a){return a.getFullYear()});eQ.every=function(a){return!isFinite(a=Math.floor(a))||!(a>0)?null:ew(function(b){b.setFullYear(Math.floor(b.getFullYear()/a)*a);b.setMonth(0,1);b.setHours(0,0,0,0)},function(b,c){b.setFullYear(b.getFullYear()+c*a)})};var eT=ew(function(a){a.setUTCHours(0,0,0,0)},function(a,b){a.setUTCDate(a.getUTCDate()+b)},function(a,b){return(b-a)/eB},function(a){return a.getUTCDate()-1});function eU(a){return ew(function(b){b.setUTCDate(b.getUTCDate()-(b.getUTCDay()+7-a)%7);b.setUTCHours(0,0,0,0)},function(a,b){a.setUTCDate(a.getUTCDate()+b*7)},function(a,b){return(b-a)/eC})}var eV=eU(0),eW=eU(1),eZ=eU(4),fb=ew(function(a){a.setUTCMonth(0,1);a.setUTCHours(0,0,0,0)},function(a,b){a.setUTCFullYear(a.getUTCFullYear()+b)},function(a,b){return b.getUTCFullYear()-a.getUTCFullYear()},function(a){return a.getUTCFullYear()});fb.every=function(a){return!isFinite(a=Math.floor(a))||!(a>0)?null:ew(function(b){b.setUTCFullYear(Math.floor(b.getUTCFullYear()/a)*a);b.setUTCMonth(0,1);b.setUTCHours(0,0,0,0)},function(b,c){b.setUTCFullYear(b.getUTCFullYear()+c*a)})};function fc(a){if(0<=a.y&&a.y<100){var b=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);b.setFullYear(a.y);return b}return new Date(a.y,a.m,a.d,a.H,a.M,a.S,a.L)}function fd(a){if(0<=a.y&&a.y<100){var b=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));b.setUTCFullYear(a.y);return b}return new Date(Date.UTC(a.y,a.m,a.d,a.H,a.M,a.S,a.L))}function fe(a){return{y:a,m:0,d:1,H:0,M:0,S:0,L:0}}function ff(a){var b=a.dateTime,c=a.date,e=a.time,f=a.periods,g=a.days,h=a.shortDays,k=a.months,l=a.shortMonths,m=fm(f),n=fo(f),o=fm(g),p=fo(g),q=fm(h),r=fo(h),s=fm(k),t=fo(k),u=fm(l),v=fo(l),w={"a":K,"A":L,"b":M,"B":N,"c":null,"d":fI,"e":fI,"f":fN,"H":fJ,"I":fK,"j":fL,"L":fM,"m":fO,"M":fP,"p":O,"Q":gp,"s":gq,"S":fQ,"u":fR,"U":fS,"V":fT,"w":fU,"W":fV,"x":null,"X":null,"y":fW,"Y":fX,"Z":fY,"%":go},x={"a":P,"A":Q,"b":R,"B":S,"c":null,"d":fZ,"e":fZ,"f":gc,"H":f_,"I":f$,"j":ga,"L":gb,"m":gd,"M":ge,"p":T,"Q":gp,"s":gq,"S":gf,"u":gg,"U":gh,"V":gi,"w":gj,"W":gk,"x":null,"X":null,"y":gl,"Y":gm,"Z":gn,"%":go},y={"a":D,"A":E,"b":F,"B":G,"c":H,"d":fy,"e":fy,"f":fE,"H":fA,"I":fA,"j":fz,"L":fD,"m":fx,"M":fB,"p":C,"Q":fG,"s":fH,"S":fC,"u":fq,"U":fr,"V":fs,"w":fp,"W":ft,"x":I,"X":J,"y":fv,"Y":fu,"Z":fw,"%":fF};w.x=z(c,w);w.X=z(e,w);w.c=z(b,w);x.x=z(c,x);x.X=z(e,x);x.c=z(b,x);function z(a,b){return function(c){var d=[],e=-1,f=0,g=a.length,h,i,j;(c instanceof Date)||(c=new Date(+c));while(++e<g)a.charCodeAt(e)===37&&(d.push(a.slice(f,e)),(i=fg[h=a.charAt(++e)])!=null?(h=a.charAt(++e)):(i=h==="e"?" ":"0"),(j=b[h])&&(h=j(c,i)),d.push(h),f=e+1);d.push(a.slice(f,e));return d.join("")}}function A(a,b){return function(c){var d=fe(1900),e=B(d,a,c+="",0),f,g;if(e!=c.length)return null;if("Q" in d)return new Date(d.Q);"p" in d&&(d.H=d.H%12+d.p*12);if("V" in d){if(d.V<1||d.V>53)return null;("w" in d)||(d.w=1);"Z" in d?(f=fd(fe(d.y)), g=f.getUTCDay(),f=g>4||g===0?eW.ceil(f):eW(f),f=eT.offset(f,(d.V-1)*7),d.y=f.getUTCFullYear(),d.m=f.getUTCMonth(),d.d=f.getUTCDate()+(d.w+6)%7):(f=b(fe(d.y)), g=f.getDay(),f=g>4||g===0?eJ.ceil(f):eJ(f),f=eG.offset(f,(d.V-1)*7),d.y=f.getFullYear(),d.m=f.getMonth(),d.d=f.getDate()+(d.w+6)%7)}else ("W" in d||"U" in d)&&(("w" in d)||(d.w="u" in d?d.u%7:"W" in d?1:0),g="Z" in d?fd(fe(d.y)).getUTCDay():b(fe(d.y)).getDay(),d.m=0,d.d="W" in d?(d.w+6)%7+d.W*7-(g+5)%7:d.w+d.U*7-(g+6)%7);if("Z" in d){d.H+=d.Z/100|0;d.M+=d.Z%100;return fd(d)}return b(d)}}function B(a,b,c,d){var e=0,f=b.length,g=c.length,h,i;while(e<f){if(d>=g)return-1;h=b.charCodeAt(e++);if(h===37){h=b.charAt(e++);i=y[h in fg?b.charAt(e++):h];if(!i||(d=i(a,c,d))<0)return-1}else if(h!=c.charCodeAt(d++)){return-1}}return d}function C(a,b,c){var d=m.exec(b.slice(c));return d?(a.p=n[d[0].toLowerCase()], c+d[0].length):-1}function D(a,b,c){var d=q.exec(b.slice(c));return d?(a.w=r[d[0].toLowerCase()], c+d[0].length):-1}function E(a,b,c){var d=o.exec(b.slice(c));return d?(a.w=p[d[0].toLowerCase()], c+d[0].length):-1}function F(a,b,c){var d=u.exec(b.slice(c));return d?(a.m=v[d[0].toLowerCase()], c+d[0].length):-1}function G(a,b,c){var d=s.exec(b.slice(c));return d?(a.m=t[d[0].toLowerCase()], c+d[0].length):-1}function H(a,c,d){return B(a,b,c,d)}function I(a,b,d){return B(a,c,b,d)}function J(a,b,c){return B(a,e,b,c)}function K(a){return h[a.getDay()]}function L(a){return g[a.getDay()]}function M(a){return l[a.getMonth()]}function N(a){return k[a.getMonth()]}function O(a){return f[+(a.getHours()>=12)]}function P(a){return h[a.getUTCDay()]}function Q(a){return g[a.getUTCDay()]}function R(a){return l[a.getUTCMonth()]}function S(a){return k[a.getUTCMonth()]}function T(a){return f[+(a.getUTCHours()>=12)]}return{format:function(a){var b=z(a+="",w);b.toString=function(){return a};return b},parse:function(a){var b=A(a+="",fc);b.toString=function(){return a};return b},utcFormat:function(a){var b=z(a+="",x);b.toString=function(){return a};return b},utcParse:function(a){var b=A(a,fd);b.toString=function(){return a};return b}}}var fg={"-":"","_":" ","0":"0"},fh=/^\s*\d+/,fi=/^%/,fj=/[\\^$*+?|[\]().{}]/g;function fk(a,b,c){var d=a<0?"-":"",e=(d?-a:a)+"",f=e.length;return d+(f<c?new Array(c-f+1).join(b)+e:e)}function fl(a){return a.replace(fj,"\\$&")}function fm(a){return new RegExp("^(?:"+a.map(fl).join("|")+")","i")}function fo(a){var b={},c=-1,d=a.length;while(++c<d)b[a[c].toLowerCase()]=c;return b}function fp(a,b,c){var d=fh.exec(b.slice(c,c+1));return d?(a.w=+d[0], c+d[0].length):-1}function fq(a,b,c){var d=fh.exec(b.slice(c,c+1));return d?(a.u=+d[0], c+d[0].length):-1}function fr(a,b,c){var d=fh.exec(b.slice(c,c+2));return d?(a.U=+d[0], c+d[0].length):-1}function fs(a,b,c){var d=fh.exec(b.slice(c,c+2));return d?(a.V=+d[0], c+d[0].length):-1}function ft(a,b,c){var d=fh.exec(b.slice(c,c+2));return d?(a.W=+d[0], c+d[0].length):-1}function fu(a,b,c){var d=fh.exec(b.slice(c,c+4));return d?(a.y=+d[0], c+d[0].length):-1}function fv(a,b,c){var d=fh.exec(b.slice(c,c+2));return d?(a.y=+d[0]+(+d[0]>68?1900:2000), c+d[0].length):-1}function fw(a,b,c){var d=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(b.slice(c,c+6));return d?(a.Z=d[1]?0:-(d[2]+(d[3]||"00")), c+d[0].length):-1}function fx(a,b,c){var d=fh.exec(b.slice(c,c+2));return d?(a.m=d[0]-1, c+d[0].length):-1}function fy(a,b,c){var d=fh.exec(b.slice(c,c+2));return d?(a.d=+d[0], c+d[0].length):-1}function fz(a,b,c){var d=fh.exec(b.slice(c,c+3));return d?(a.m=0, a.d=+d[0], c+d[0].length):-1}function fA(a,b,c){var d=fh.exec(b.slice(c,c+2));return d?(a.H=+d[0], c+d[0].length):-1}function fB(a,b,c){var d=fh.exec(b.slice(c,c+2));return d?(a.M=+d[0], c+d[0].length):-1}function fC(a,b,c){var d=fh.exec(b.slice(c,c+2));return d?(a.S=+d[0], c+d[0].length):-1}function fD(a,b,c){var d=fh.exec(b.slice(c,c+3));return d?(a.L=+d[0], c+d[0].length):-1}function fE(a,b,c){var d=fh.exec(b.slice(c,c+6));return d?(a.L=Math.floor(d[0]/1000), c+d[0].length):-1}function fF(a,b,c){var d=fi.exec(b.slice(c,c+1));return d?c+d[0].length:-1}function fG(a,b,c){var d=fh.exec(b.slice(c));return d?(a.Q=+d[0], c+d[0].length):-1}function fH(a,b,c){var d=fh.exec(b.slice(c));return d?(a.Q=+d[0]*1000, c+d[0].length):-1}function fI(a,b){return fk(a.getDate(),b,2)}function fJ(a,b){return fk(a.getHours(),b,2)}function fK(a,b){return fk(a.getHours()%12||12,b,2)}function fL(a,b){return fk(1+eG.count(eQ(a),a),b,3)}function fM(a,b){return fk(a.getMilliseconds(),b,3)}function fN(a,b){return fM(a,b)+"000"}function fO(a,b){return fk(a.getMonth()+1,b,2)}function fP(a,b){return fk(a.getMinutes(),b,2)}function fQ(a,b){return fk(a.getSeconds(),b,2)}function fR(a){var b=a.getDay();return b===0?7:b}function fS(a,b){return fk(eI.count(eQ(a),a),b,2)}function fT(a,b){var c=a.getDay();a=c>=4||c===0?eM(a):eM.ceil(a);return fk(eM.count(eQ(a),a)+(eQ(a).getDay()===4),b,2)}function fU(a){return a.getDay()}function fV(a,b){return fk(eJ.count(eQ(a),a),b,2)}function fW(a,b){return fk(a.getFullYear()%100,b,2)}function fX(a,b){return fk(a.getFullYear()%10000,b,4)}function fY(a){var b=a.getTimezoneOffset();return(b>0?"-":(b*=-1, "+"))+fk(b/60|0,"0",2)+fk(b%60,"0",2)}function fZ(a,b){return fk(a.getUTCDate(),b,2)}function f_(a,b){return fk(a.getUTCHours(),b,2)}function f$(a,b){return fk(a.getUTCHours()%12||12,b,2)}function ga(a,b){return fk(1+eT.count(fb(a),a),b,3)}function gb(a,b){return fk(a.getUTCMilliseconds(),b,3)}function gc(a,b){return gb(a,b)+"000"}function gd(a,b){return fk(a.getUTCMonth()+1,b,2)}function ge(a,b){return fk(a.getUTCMinutes(),b,2)}function gf(a,b){return fk(a.getUTCSeconds(),b,2)}function gg(a){var b=a.getUTCDay();return b===0?7:b}function gh(a,b){return fk(eV.count(fb(a),a),b,2)}function gi(a,b){var c=a.getUTCDay();a=c>=4||c===0?eZ(a):eZ.ceil(a);return fk(eZ.count(fb(a),a)+(fb(a).getUTCDay()===4),b,2)}function gj(a){return a.getUTCDay()}function gk(a,b){return fk(eW.count(fb(a),a),b,2)}function gl(a,b){return fk(a.getUTCFullYear()%100,b,2)}function gm(a,b){return fk(a.getUTCFullYear()%10000,b,4)}function gn(){return"+0000"}function go(){return"%"}function gp(a){return+a}function gq(a){return Math.floor(+a/1000)}var gr,gs,gt,gu,gv;gw({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function gw(a){gr=ff(a);gs=gr.format;gt=gr.parse;gu=gr.utcFormat;gv=gr.utcParse;return gr}var gC={value:function(){}};function gD(){for(var a=0,b=arguments.length,c={},d;a<b;++a){if(!(d=arguments[a]+"")||d in c)throw new Error("illegal type: "+d);c[d]=[]}return new gE(c)}function gE(a){this._=a}function gF(a,b){return a.trim().split(/^|\s+/).map(function(a){var c="",d=a.indexOf(".");d>=0&&(c=a.slice(d+1), a=a.slice(0,d));if(a&&!b.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:c}})}gE.prototype=gD.prototype={constructor:gE,on:function(a,b){var c=this._,d=gF(a+"",c),e,f=-1,g=d.length;if(arguments.length<2){while(++f<g)if((e=(a=d[f]).type)&&(e=gG(c[e],a.name)))return e;return}if(b!=null&&typeof b!=="function")throw new Error("invalid callback: "+b);while(++f<g){if(e=(a=d[f]).type)c[e]=gH(c[e],a.name,b);else if(b==null)for(e in c)c[e]=gH(c[e],a.name,null)}return this},copy:function(){var a={},b=this._;for(var c in b)a[c]=b[c].slice();return new gE(a)},call:function(a,b){if((e=arguments.length-2)>0)for(var c=new Array(e),d=0,e,f;d<e;++d)c[d]=arguments[d+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(f=this._[a], d=0, e=f.length;d<e;++d)f[d].value.apply(b,c)},apply:function(a,b,c){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var d=this._[a],e=0,f=d.length;e<f;++e)d[e].value.apply(b,c)}};function gG(a,b){for(var c=0,d=a.length,e;c<d;++c){if((e=a[c]).name===b){return e.value}}}function gH(a,b,c){for(var d=0,e=a.length;d<e;++d){if(a[d].name===b){a[d]=gC, a=a.slice(0,d).concat(a.slice(d+1));break}}c!=null&&a.push({name:b,value:c});return a}var gI=0,gJ=0,gK=0,gL=1000,gM,gN,gO=0,gP=0,gQ=0,gR=typeof performance==="object"&&performance.now?performance:Date,gS=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(a){setTimeout(a,17)};function gT(){return gP||(gS(gU), gP=gR.now()+gQ)}function gU(){gP=0}function gV(){this._call=this._time=this._next=null}gV.prototype=gW.prototype={constructor:gV,restart:function(a,b,c){if(typeof a!=="function")throw new TypeError("callback is not a function");c=(c==null?gT():+c)+(b==null?0:+b);!this._next&&gN!==this&&(gN?(gN._next=this):(gM=this),gN=this);this._call=a;this._time=c;g$()},stop:function(){this._call&&(this._call=null,this._time=Infinity,g$())}};function gW(a,b,c){var d=new gV;d.restart(a,b,c);return d}function gX(){gT();++gI;var a=gM,b;while(a)(b=gP-a._time)>=0&&a._call.call(null,b),a=a._next;--gI}function gY(){gP=(gO=gR.now())+gQ;gI=gJ=0;try{gX()}finally{gI=0,g_(),gP=0}}function gZ(){var a=gR.now(),b=a-gO;b>gL&&(gQ-=b, gO=a)}function g_(){var a,b=gM,c,d=Infinity;while(b)b._call?(d>b._time&&(d=b._time),a=b, b=b._next):(c=b._next, b._next=null,b=a?a._next=c:gM=c);gN=a;g$(d)}function g$(a){if(gI)return;gJ&&(gJ=clearTimeout(gJ));var b=a-gP;b>24?(a<Infinity&&(gJ=setTimeout(gY,a-gR.now()-gQ)),gK&&(gK=clearInterval(gK))):(gK||(gO=gR.now(), gK=setInterval(gZ,gL)),gI=1, gS(gY))}function ha(a,b,c){var d=new gV;b=b==null?0:+b;d.restart(function(c){d.stop();a(c+b)},b,c);return d}var hb=gD("start","end","interrupt"),hc=[],hd=0,he=1,hf=2,hg=3,hh=4,hj=5,hk=6;function hl(a,b,c,d,e,f){var g=a.__transition;if(!g)a.__transition={};else if(c in g)return;hp(a,c,{name:b,index:d,group:e,on:hb,tween:hc,time:f.time,delay:f.delay,duration:f.duration,ease:f.ease,timer:null,state:hd})}function hm(a,b){var c=ho(a,b);if(c.state>hd)throw new Error("too late; already scheduled");return c}function hn(a,b){var c=ho(a,b);if(c.state>hf)throw new Error("too late; already started");return c}function ho(a,b){var c=a.__transition;if(!c||!(c=c[b]))throw new Error("transition not found");return c}function hp(a,b,c){var d=a.__transition,e;d[b]=c;c.timer=gW(f,0,c.time);function f(a){c.state=he;c.timer.restart(g,c.delay,c.time);c.delay<=a&&g(a-c.delay)}function g(f){var j,k,l,m;if(c.state!==he)return i();for(j in d){m=d[j];if(m.name!==c.name)continue;if(m.state===hg)return ha(g);m.state===hh?(m.state=hk,m.timer.stop(),m.on.call("interrupt",a,a.__data__,m.index,m.group),delete d[j]):+j<b&&(m.state=hk,m.timer.stop(),delete d[j])}ha(function(){c.state===hg&&(c.state=hh,c.timer.restart(h,c.delay,c.time),h(f))});c.state=hf;c.on.call("start",a,a.__data__,c.index,c.group);if(c.state!==hf)return;c.state=hg;e=new Array(l=c.tween.length);for(j=0, k=-1;j<l;++j)(m=c.tween[j].value.call(a,a.__data__,c.index,c.group))&&(e[++k]=m);e.length=k+1}function h(b){var d=b<c.duration?c.ease.call(null,b/c.duration):(c.timer.restart(i), c.state=hj, 1),f=-1,g=e.length;while(++f<g)e[f].call(null,d);c.state===hj&&(c.on.call("end",a,a.__data__,c.index,c.group),i())}function i(){c.state=hk;c.timer.stop();delete d[b];for(i in d)return;delete a.__transition}}function hq(a,b){var c=a.__transition,d,e,f=!0,g;if(!c)return;b=b==null?null:b+"";for(g in c){if((d=c[g]).name!==b){f=!1;continue}e=d.state>hf&&d.state<hj;d.state=hk;d.timer.stop();e&&d.on.call("interrupt",a,a.__data__,d.index,d.group);delete c[g]}f&&delete a.__transition}function hr(a){return this.each(function(){hq(this,a)})}function hs(a,b){var c,d;return function(){var e=hn(this,a),f=e.tween;if(f!==c){d=c=f;for(var g=0,h=d.length;g<h;++g){if(d[g].name===b){d=d.slice();d.splice(g,1);break}}}e.tween=d}}function ht(a,b,c){var d,e;if(typeof c!=="function")throw new Error;return function(){var f=hn(this,a),g=f.tween;if(g!==d){e=(d=g).slice();for(var h={name:b,value:c},i=0,j=e.length;i<j;++i){if(e[i].name===b){e[i]=h;break}}i===j&&e.push(h)}f.tween=e}}function hu(a,b){var c=this._id;a+="";if(arguments.length<2){var d=ho(this.node(),c).tween;for(var e=0,f=d.length,g;e<f;++e){if((g=d[e]).name===a){return g.value}}return null}return this.each((b==null?hs:ht)(c,a,b))}function hv(a,b,c){var d=a._id;a.each(function(){var a=hn(this,d);(a.value||(a.value={}))[b]=c.apply(this,arguments)});return function(a){return ho(a,d).value[b]}}function hw(a,b){var c;return(typeof b==="number"?dM:b instanceof cO?dJ:(c=cO(b))?(b=c, dJ):dS)(a,b)}function hx(a){return function(){this.removeAttribute(a)}}function hy(a){return function(){this.removeAttributeNS(a.space,a.local)}}function hz(a,b,c){var d,e;return function(){var f=this.getAttribute(a);return f===c?null:f===d?e:e=b(d=f,c)}}function hA(a,b,c){var d,e;return function(){var f=this.getAttributeNS(a.space,a.local);return f===c?null:f===d?e:e=b(d=f,c)}}function hB(a,b,c){var d,e,f;return function(){var g,h=c(this);if(h==null)return void this.removeAttribute(a);g=this.getAttribute(a);return g===h?null:g===d&&h===e?f:f=b(d=g,e=h)}}function hC(a,b,c){var d,e,f;return function(){var g,h=c(this);if(h==null)return void this.removeAttributeNS(a.space,a.local);g=this.getAttributeNS(a.space,a.local);return g===h?null:g===d&&h===e?f:f=b(d=g,e=h)}}function hD(a,b){var c=B(a),d=c==="transform"?ee:hw;return this.attrTween(a,typeof b==="function"?(c.local?hC:hB)(c,d,hv(this,"attr."+a,b)):b==null?(c.local?hy:hx)(c):(c.local?hA:hz)(c,d,b+""))}function hE(a,b){function c(){var c=this,d=b.apply(c,arguments);return d&&function(b){c.setAttributeNS(a.space,a.local,d(b))}}c._value=b;return c}function hF(a,b){function c(){var c=this,d=b.apply(c,arguments);return d&&function(b){c.setAttribute(a,d(b))}}c._value=b;return c}function hG(a,b){var c="attr."+a;if(arguments.length<2)return(c=this.tween(c))&&c._value;if(b==null)return this.tween(c,null);if(typeof b!=="function")throw new Error;var d=B(a);return this.tween(c,(d.local?hE:hF)(d,b))}function hH(a,b){return function(){hm(this,a).delay=+b.apply(this,arguments)}}function hI(a,b){return b=+b, function(){hm(this,a).delay=b}}function hJ(a){var b=this._id;return arguments.length?this.each((typeof a==="function"?hH:hI)(b,a)):ho(this.node(),b).delay}function hK(a,b){return function(){hn(this,a).duration=+b.apply(this,arguments)}}function hL(a,b){return b=+b, function(){hn(this,a).duration=b}}function hM(a){var b=this._id;return arguments.length?this.each((typeof a==="function"?hK:hL)(b,a)):ho(this.node(),b).duration}function hN(a,b){if(typeof b!=="function")throw new Error;return function(){hn(this,a).ease=b}}function hO(a){var b=this._id;return arguments.length?this.each(hN(b,a)):ho(this.node(),b).ease}function hP(a){typeof a!=="function"&&(a=O(a));for(var b=this._groups,c=b.length,d=new Array(c),e=0;e<c;++e){for(var f=b[e],g=f.length,h=d[e]=[],i,j=0;j<g;++j)(i=f[j])&&a.call(i,i.__data__,j,f)&&h.push(i)}return new il(d,this._parents,this._name,this._id)}function hQ(a){if(a._id!==this._id)throw new Error;for(var b=this._groups,c=a._groups,d=b.length,e=c.length,f=Math.min(d,e),g=new Array(d),h=0;h<f;++h){for(var i=b[h],j=c[h],k=i.length,l=g[h]=new Array(k),m,n=0;n<k;++n)(m=i[n]||j[n])&&(l[n]=m)}for(;h<d;++h)g[h]=b[h];return new il(g,this._parents,this._name,this._id)}function hR(a){return(a+"").trim().split(/^|\s+/).every(function(a){var b=a.indexOf(".");b>=0&&(a=a.slice(0,b));return!a||a==="start"})}function hS(a,b,c){var d,e,f=hR(b)?hm:hn;return function(){var g=f(this,a),h=g.on;h!==d&&(e=(d=h).copy()).on(b,c);g.on=e}}function hT(a,b){var c=this._id;return arguments.length<2?ho(this.node(),c).on.on(a):this.each(hS(c,a,b))}function hU(a){return function(){var a=this.parentNode;for(i in this.__transition)if(+i!==id)return;a&&a.removeChild(this)}}function hV(){return this.on("end.remove",hU(this._id))}function hW(a){var b=this._name,c=this._id;typeof a!=="function"&&(a=G(a));for(var d=this._groups,e=d.length,f=new Array(e),g=0;g<e;++g){for(var h=d[g],i=h.length,j=f[g]=new Array(i),k,l,m=0;m<i;++m)(k=h[m])&&(l=a.call(k,k.__data__,m,h))&&("__data__" in k&&(l.__data__=k.__data__),j[m]=l,hl(j[m],b,c,m,j,ho(k,c)))}return new il(f,this._parents,b,c)}function hX(a){var b=this._name,c=this._id;typeof a!=="function"&&(a=J(a));for(var d=this._groups,e=d.length,f=[],g=[],h=0;h<e;++h){for(var i=d[h],j=i.length,k,l=0;l<j;++l){if(k=i[l]){for(var m=a.call(k,k.__data__,l,i),n,o=ho(k,c),p=0,q=m.length;p<q;++p)(n=m[p])&&hl(n,b,c,p,m,o);f.push(m);g.push(k)}}}return new il(f,g,b,c)}var hY=bp.prototype.constructor;function hZ(){return new hY(this._groups,this._parents)}function h_(a,b){var c,d,e;return function(){var f=au(this,a),g=(this.style.removeProperty(a), au(this,a));return f===g?null:f===c&&g===d?e:e=b(c=f,d=g)}}function h$(a){return function(){this.style.removeProperty(a)}}function ia(a,b,c){var d,e;return function(){var f=au(this,a);return f===c?null:f===d?e:e=b(d=f,c)}}function ib(a,b,c){var d,e,f;return function(){var g=au(this,a),h=c(this);h==null&&(h=(this.style.removeProperty(a), au(this,a)));return g===h?null:g===d&&h===e?f:f=b(d=g,e=h)}}function ic(a,b,c){var d=(a+="")==="transform"?ed:hw;return b==null?this.styleTween(a,h_(a,d)).on("end.style."+a,h$(a)):this.styleTween(a,typeof b==="function"?ib(a,d,hv(this,"style."+a,b)):ia(a,d,b+""),c)}function id(a,b,c){function d(){var d=this,e=b.apply(d,arguments);return e&&function(b){d.style.setProperty(a,e(b),c)}}d._value=b;return d}function ie(a,b,c){var d="style."+(a+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(b==null)return this.tween(d,null);if(typeof b!=="function")throw new Error;return this.tween(d,id(a,b,c==null?"":c))}function ig(a){return function(){this.textContent=a}}function ih(a){return function(){var b=a(this);this.textContent=b==null?"":b}}function ii(a){return this.tween("text",typeof a==="function"?ih(hv(this,"text",a)):ig(a==null?"":a+""))}function ij(){var a=this._name,b=this._id,c=io();for(var d=this._groups,e=d.length,f=0;f<e;++f){for(var g=d[f],h=g.length,i,j=0;j<h;++j){if(i=g[j]){var k=ho(i,b);hl(i,a,c,j,g,{time:k.time+k.delay+k.duration,delay:0,duration:k.duration,ease:k.ease})}}}return new il(d,this._parents,a,c)}var ik=0;function il(a,b,c,d){this._groups=a;this._parents=b;this._name=c;this._id=d}function im(a){return bp().transition(a)}function io(){return++ik}var ip=bp.prototype;il.prototype=im.prototype={constructor:il,select:hW,selectAll:hX,filter:hP,merge:hQ,selection:hZ,transition:ij,call:ip.call,nodes:ip.nodes,node:ip.node,size:ip.size,empty:ip.empty,each:ip.each,on:hT,attr:hD,attrTween:hG,style:ic,styleTween:ie,text:ii,remove:hV,tween:hu,delay:hJ,duration:hM,ease:hO};function iq(a){return((a*=2)<=1?a*a*a:(a-=2)*a*a+2)/2}var it={time:null,delay:0,duration:250,ease:iq};function iu(a,b){var c;while(!(c=a.__transition)||!(c=c[b])){if(!(a=a.parentNode)){return it.time=gT(), it}}return c}function iv(a){var b,c;a instanceof il?(b=a._id, a=a._name):(b=io(), (c=it).time=gT(), a=a==null?null:a+"");for(var d=this._groups,e=d.length,f=0;f<e;++f){for(var g=d[f],h=g.length,i,j=0;j<h;++j)(i=g[j])&&hl(i,a,b,j,g,c||iu(i,b))}return new il(d,this._parents,a,b)}bp.prototype.interrupt=hr;bp.prototype.transition=iv;function iw(a){var b=typeof a;return a!=null&&(b=='object'||b=='function')}var ix=typeof global=='object'&&global&&global.Object===Object&&global,iy=typeof self=='object'&&self&&self.Object===Object&&self,iz=ix||iy||Function('return this')(),iA=function(){return iz.Date.now()},iB=iz.Symbol,iC=Object.prototype,iD=iC.hasOwnProperty,iE=iC.toString,iF=iB?iB.toStringTag:undefined;function iG(a){var b=iD.call(a,iF),c=a[iF];try{a[iF]=undefined;var d=!0}catch(a){};var f=iE.call(a);d&&(b?(a[iF]=c):delete a[iF]);return f}var iH=Object.prototype,iI=iH.toString;function iJ(a){return iI.call(a)}var iK='[object Null]',iL='[object Undefined]',iM=iB?iB.toStringTag:undefined;function iN(a){if(a==null){return a===undefined?iL:iK}return iM&&iM in Object(a)?iG(a):iJ(a)}function iO(a){return a!=null&&typeof a=='object'}var iP='[object Symbol]';function iQ(a){return typeof a=='symbol'||iO(a)&&iN(a)==iP}var iR=NaN,iS=/^\s+|\s+$/g,iT=/^[-+]0x[0-9a-f]+$/i,iU=/^0b[01]+$/i,iV=/^0o[0-7]+$/i,iW=parseInt;function iX(a){if(typeof a=='number'){return a}if(iQ(a)){return iR}if(iw(a)){var b=typeof a.valueOf=='function'?a.valueOf():a;a=iw(b)?b+'':b}if(typeof a!='string'){return a===0?a:+a}a=a.replace(iS,'');var c=iU.test(a);return c||iV.test(a)?iW(a.slice(2),c?2:8):(iT.test(a)?iR:+a)}var iY='Expected a function',iZ=Math.max,i_=Math.min;function i$(a,b,c){var d,e,f,g,h,i,j=0,k=!1,l=!1,m=!0;if(typeof a!='function'){throw new TypeError(iY)}b=iX(b)||0;iw(c)&&(k=!!c.leading,l='maxWait' in c,f=l?iZ(iX(c.maxWait)||0,b):f,m='trailing' in c?!!c.trailing:m);function n(b){var c=d,f=e;d=e=undefined;j=b;g=a.apply(f,c);return g}function o(a){j=a;h=setTimeout(r,b);return k?n(a):g}function p(a){var c=a-i,d=a-j,e=b-c;return l?i_(e,f-d):e}function q(a){var c=a-i,d=a-j;return i===undefined||c>=b||c<0||l&&d>=f}function r(){var a=iA();if(q(a)){return s(a)}h=setTimeout(r,p(a))}function s(a){h=undefined;if(m&&d){return n(a)}d=e=undefined;return g}function t(){h!==undefined&&clearTimeout(h);j=0;d=i=e=h=undefined}function u(){return h===undefined?g:s(iA())}function v(){var a=iA(),c=q(a);d=arguments;e=this;i=a;if(c){if(h===undefined){return o(i)}if(l){h=setTimeout(r,b);return n(i)}}h===undefined&&(h=setTimeout(r,b));return g}v.cancel=t;v.flush=u;return v}function ja(a){a=a||Object.create(null);return{on:function d(b,c){(a[b]||(a[b]=[])).push(c)},off:function d(b,c){a[b]&&a[b].splice(a[b].indexOf(c)>>>0,1)},emit:function d(b,c){(a[b]||[]).slice().map(function(a){a(c)});(a['*']||[]).slice().map(function(a){a(b,c)})}}}var jb=function(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}},jc=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value" in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),jd=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},je=function(a,b){if(typeof b!=="function"&&b!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof b)}a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},jf=function(a,b){if(!a){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return b&&(typeof b==="object"||typeof b==="function")?b:a},jg=function(){function a(){jb(this,a);this.baseDefaultOptions={};this.event=ja();this.on=this.event.on;this.once=this.event.once;this.off=this.event.off;var b=i$(this.onResize.bind(this),250);window.addEventListener('resize',b)}jc(a,[{key:'init',value:function a(){var b=this,c=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.options=jd({},this.baseDefaultOptions,this.defaultOptions,c);var d=bq(this.options.container);d.classed('oecd-chart__container',!0);if(this.options.title||this.options.renderInfoButton){var e=d.append('div').attr('class','oecd-chart__title-container');this.options.title&&e.append('div').attr('class','oecd-chart__title').text(this.options.title);this.options.renderInfoButton&&e.append('div').attr('class','oecd-chart__info').html('<svg class="oecd-chart__info-icon" width="25" height="25" viewBox="0 0 40 40"><path d="M18.4 15v-3.4h3.3V15h-3.3zM20 33.4q5.5 0 9.4-4t4-9.3-4-9.3-9.4-4-9.4 4-4 9.4 4 9.5 9.4 4zm0-30q7 0 11.8 5t5 11.7-5 12T20 36.7t-11.8-5-5-11.7 5-11.7 11.8-5zm-1.6 25v-10h3.3v10h-3.3z"/></svg>').on('click',function(){return b.event.emit('infoclick')})}this.render(c)}},{key:'onResize',value:function a(){var b=bq(this.options.container).node().clientWidth;b!==window.innerWidth&&this.render(this.options)}},{key:'removeSelections',value:function b(a){var c=this;a.forEach(function(a){return bq(c.options.container).selectAll(a).remove()})}},{key:'toggleTitle',value:function a(){var b=document.querySelector(this.options.container+' .oecd-chart__title-container');b.classList.toggle('oecd-chart__title-container--hidden')}}]);return a}(),jh=function(a){je(b,a);function b(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};jb(this,b);var c=jf(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));c.defaultOptions={container:null,extent:[0,100],data:[],height:55,marginLeft:35,marginRight:35,fontSize:14,radius:10,labelOffset:5,ticks:4,tickValues:null,showLabels:!1,colorLabels:!1,callback:null,showTicks:!0,labelFormat:function b(a){return Math.round(a*10)/10}};c.init(a);return c}jc(b,[{key:'render',value:function a(){var b=this.options,c=b.data,d=b.height,e=b.container,f=b.extent,g=b.marginLeft,h=b.marginRight,i=b.labelOffset,j=bq(e),k=j.node().clientWidth,l=k-g-h,m=d+i;this.removeSelections(['.pearlchart__svg']);this.scale=es().domain(f).range([0,l]);var n=j.classed('OECDCharts__PearlChart',!0).append('svg').classed('pearlchart__svg',!0).attr('width',k).attr('height',m);this.chartWrapper=n.append('g').classed('pearlchart__chart',!0).attr('transform','translate('+(g-i)+', '+(this.options.title||this.options.renderInfoButton?-10:10)+')');this.getAxis({chartWrapper:this.chartWrapper,extent:f,innerWidth:l,innerHeight:m,labelOffset:i});this.nodesWrapper=this.chartWrapper.append('g').classed('pearlchart__nodes',!0);this.update(c)}},{key:'update',value:function c(a){this.options.data=a;var d=b.parseData(a),e=im().duration(750),f=this.options,g=f.labelOffset,h=f.radius,i=f.height,j=i+g;this.getCircles(d,j,h,e,g)}},{key:'getAxis',value:function a(){var b=this,c=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.defaultOptions,e=c.chartWrapper,f=c.extent,g=c.innerWidth,h=c.innerHeight,j=c.labelOffset,k=e.append('g').classed('pearlchart__x-axis',!0);k.append('line').attr('x1',0).attr('x2',g).attr('y1',h/2).attr('y2',h/2);var l=k.selectAll('.pearlchart__axis-label').data(f);l.exit().remove();l.enter().append('text').classed('pearlchart__axis-label',!0).text(function(a){return a}).attr('font-size',this.options.fontSize).attr('x',function(a,c){return b.scale.range()[c]}).attr('dx',function(a,b){return b===0?'-'+j+'px':j+'px'}).attr('y',h/2).attr('dy',j).attr('text-anchor',function(a,b){return b===0?'end':'start'});var m=bE(this.scale).tickFormat(bV('.0f')).tickSize(15);this.options.tickValues?m.tickValues(this.options.tickValues):m.ticks(this.options.ticks);k.append('g').classed('pearlchart__axis-ticks',!0).style('display',this.options.showTicks?'block':'none').attr('transform','translate(0, '+(this.options.radius*2+10)+')').call(m);+k.select('.tick:last-of-type').text()===this.options.extent[1]&&k.select('.tick:last-of-type').style('display','none');+k.select('.tick').text()===this.options.extent[0]&&k.select('.tick').style('display','none');k.selectAll('pearlchart__axis-ticks').style('font-size',this.options.fontSize*0.8)}},{key:'getCircles',value:function g(a,b,c,e,f){var h=this,j=this.nodesWrapper.selectAll('.pearlchart__circle-wrapper').data(a,function(a){return a.value});j.exit().remove();j.transition(e).style('fill',function(a){return a.color});var k=j.enter().append('g').classed('pearlchart__circle-wrapper',!0).classed('clickable',this.options.callback!==null).on('mouseenter',function(a,b,c){bq(c[b]).select('.pearlchart__circle-tooltip').style('display','block')}).on('mouseleave',function(a,b,c){bq(c[b]).select('.pearlchart__circle-tooltip').style('display','none')}).on('click',function(){h.options.callback&&h.options.callback(h.options.data)});k.append('circle').classed('pearlchart__circle',!0).attr('cx',function(a){return h.scale(a.value)}).attr('cy',b/2).attr('r',c).style('fill',function(a){return a.color});this.options.showLabels?k.append('text').classed('pearlchart__circle-label',!0).attr('font-size',this.options.fontSize).attr('x',function(a){return h.scale(a.value)}).attr('y',b/2).attr('dy',-(c*2)+f).text(function(a){return h.options.labelFormat(a.value)}).attr('text-anchor','middle').style('fill',function(a){return!h.options.colorLabels?'#000':a.color}):k.append('text').classed('pearlchart__circle-tooltip',!0).attr('font-size',this.options.fontSize).attr('x',function(a){return h.scale(a.value)}).attr('y',b/2).attr('dy',-(c*2)+f).text(function(a){return h.options.labelFormat(a.value)}).attr('text-anchor','middle').style('fill',function(a){return!h.options.colorLabels?'#000':a.color}).style('display','none')}}],[{key:'parseData',value:function b(a){return a.map(function(a){a.color=a.color||'#777777';return a})}}]);return b}(jg),ji=function(c){je(e,c);function e(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};jb(this,e);var b=jf(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));b.defaultOptions={container:null,extent:[0,100],data:[],fontSize:14,marginTop:15,barHeight:30,marginLeft:30,marginRight:45,labelOffset:5};b.init(a);return b}jc(e,[{key:'render',value:function a(){var b=this.options,c=b.data,d=b.container,e=b.extent,f=b.marginTop,g=b.barHeight,i=b.marginLeft,j=b.marginRight,k=bq(d),l=k.node().getBoundingClientRect(),m=l.width,n=m-i-j,o=(g+f)*c.length;this.removeSelections(['.stacked-chart__svg']);this.x=es().range([0,n]).domain(e);this.colorScale=es();var p=k.classed('OECDCharts__StackedChart',!0).append('svg').classed('stacked-chart__svg',!0).attr('width',m).attr('height',o);this.chartWrapper=p.append('g').attr('class','stacked-chart').attr('transform','translate('+i+', 0)');this.update(c)}},{key:'update',value:function b(a){this.options.data=a;var c=e.parseData(a);e.validateData(a);var d=this.getChart(c);this.getBars(d);this.getStackedLabels(d);this.getBarLabels(d)}},{key:'getChart',value:function b(a){var c=this,e=this.chartWrapper.selectAll('.stacked-chart__bar').data(a,function(a){return JSON.stringify(a)});e.exit().remove();return e.enter().append('g').classed('stacked-chart__bar',!0).attr('transform',function(a,b){return'translate(0, '+b*(c.options.barHeight+c.options.marginTop)+')'})}},{key:'getBars',value:function b(a){var c=this;a.selectAll('.stacked-chart__rect').data(function(a){return a.values.map(function(b,c){return{value:b,offset:a.offset[c],colors:a.colors}})}).enter().append('rect').classed('stacked-chart__rect',!0).attr('width',function(a){return c.x(a.value)}).attr('x',function(a){return c.x(a.offset)}).attr('height',this.options.barHeight).attr('fill',function(a,b,d){return c.colorScale.domain([0,d.length]).range(a.colors)(b)})}},{key:'getStackedLabels',value:function b(a){var c=this;a.selectAll('.stacked-chart__stackedlabel').data(function(a){return a.stackLabels.map(function(b,c){return{stackLabel:b,offset:a.offset[c],value:a.values[c]}})}).enter().append('text').classed('stacked-chart__stackedlabel',!0).attr('y',this.options.barHeight/2).attr('x',function(a){return c.x(a.offset+a.value/2)}).attr('text-anchor','middle').attr('dy','.35em').attr('fill','#fff').text(function(a){return a.stackLabel}).attr('font-size',this.options.fontSize)}},{key:'getBarLabels',value:function b(a){var c=this.options,e=c.labelOffset,f=c.barHeight,g=c.fontSize;a.selectAll('.stacked-chart__barlabel').data(function(a){return a.barLabels}).enter().append('text').classed('stacked-chart__barlabel',!0).attr('y',f/2).attr('x',function(a,b,c){return b===0?0:c[b].parentNode.getBoundingClientRect().width}).attr('dy','.35em').attr('dx',function(a,b){return b===0?'-'+e+'px':e+'px'}).attr('text-anchor',function(a,b){return b===0?'end':'start'}).text(function(a){return a}).attr('font-size',g)}}],[{key:'parseData',value:function e(c){return c.map(function(c){var d=100/c.values.reduce(function(a,b){return a+b});c.values=c.values.map(function(a){return a*d});c.offset=c.values.map(function(a,b){return cn(c.values.slice(0,b))});c.stackLabels=c.stackLabels||[];return c})}},{key:'validateData',value:function b(a){var c=a.filter(function(a){return a.values.length!==a.stackLabels.length&&a.stackLabels.length});if(c.length){throw Error('invalid data: amount of stackLabels is not matching amount of values.')}}}]);return e}(jg),jj=function(a){je(b,a);function b(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};jb(this,b);var c=jf(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));c.defaultOptions={container:null,extent:null,data:[],step:50,legend:null,innerMarginTop:10,innerMarginBottom:10,innerMarginLeft:5,innerMarginRight:5,markerHeight:30,markerWidth:10,radius:10,fontSize:12};c.init(a);return c}jc(b,[{key:'render',value:function b(a){this.update(this.options.data)}},{key:'update',value:function c(a){this.options.data=a;var d=b.parseData(a);b.validateData(d);this.getChart(d);var e=this.getMarkerGroups(d);this.getMarkers(e);this.getLabels(e)}},{key:'getChart',value:function b(a){var c=this.options,d=c.container,e=c.extent,f=c.step,g=c.legend,h=c.markerHeight,i=c.innerMarginTop,j=c.innerMarginBottom,k=c.innerMarginLeft,l=c.innerMarginRight,m=bq(d),n=m.node().getBoundingClientRect(),o=n.width,p=o-k-l;this.removeSelections(['.boxplot__svg','.boxplot__legend']);this.x=es().range([0,p-l-k]).domain(e);var q=(h+20)*a.length+i+j;m.append('div').attr('class','boxplot__legend').html(g);this.svg=m.classed('OECDCharts__BoxPlot',!0).append('svg').classed('boxplot__svg',!0).attr('width',p).attr('height',q).append('g').attr('transform','translate('+k+', 0)');var r=(e[1]-e[0])/f,s=bE(this.x).ticks(r).tickSize(-q);this.svg.append('g').classed('boxplot__axis',!0).attr('transform','translate('+k+', '+(q-i-j)+')').call(s)}},{key:'getMarkerGroups',value:function b(a){var c=this,e=this.svg.selectAll('.boxplot__marker-group').data(a,function(a){return JSON.stringify(a)});e.exit().remove();return e.enter().append('g').classed('boxplot__marker-group',!0).attr('transform',function(a,b){return'translate(0, '+((c.options.markerHeight+20)*b+1)+')'})}},{key:'getMarkers',value:function b(a){var c=this;a.append('line').classed('marker-group__line',!0).attr('x1',function(a){return c.x(a.values[0])+5}).attr('x2',function(a){return c.x(a.values[2])+5}).attr('y1',this.options.markerHeight/2).attr('y2',this.options.markerHeight/2).style('stroke',function(a){return a.colors[1]});a.selectAll('.marker-group__rect').data(function(a){return[0,2].map(function(b){return{value:a.values[b],color:a.colors[b]}})}).enter().append('rect').classed('marker-group__rect',!0).attr('height',this.options.markerHeight).attr('width',this.options.markerWidth).attr('x',function(a){return c.x(a.value)+5-c.options.markerWidth/2}).style('fill',function(a){return a.color});a.selectAll('.marker-group__circle').data(function(a){return[a]}).enter().append('circle').classed('marker-group__circle',!0).attr('r',this.options.radius).attr('cx',function(a){return c.x(a.values[1])+5}).attr('cy',this.options.markerHeight/2).style('fill',function(a){return a.colors[1]})}},{key:'getLabels',value:function b(a){this.getLabel(a,'left');this.getLabel(a,'right')}},{key:'getLabel',value:function e(a,c){var f=this,g=c==='left',h=a.filter(function(a){return g?a.labelLeft:a.labelRight}).selectAll('.marker-group__label--'+c).data(function(a){return[a]}).enter().append('g').classed('marker-group__label--'+c,!0);h.filter(function(a){return g?a.labelLeft.text:a.labelRight.text}).selectAll('.marker-group__label--text-'+c).data(function(a){var b=g?a.labelLeft:a.labelRight,c=b.text,d=b.icon;return[{text:c,icon:d,value:g?a.values[0]:a.values[2]}]}).enter().append('text').classed('marker-group__label--text-'+c,!0).attr('y',this.options.markerHeight/2+this.options.fontSize/4).attr('x',function(a){var b=a.icon?30:5;return g?f.x(a.value)-b:f.x(a.value)+b+10}).text(function(a){return a.text}).attr('text-anchor',g?'end':'start').attr('font-size',this.options.fontSize);h.filter(function(a){return g?a.labelLeft.icon:a.labelRight.icon}).selectAll('.marker-group__label--icon-'+c).data(function(a){var b=g?a.labelLeft:a.labelRight,c=b.icon;return[{icon:c,value:g?a.values[0]:a.values[2]}]}).enter().append('svg:image').classed('marker-group__label--icon-'+c,!0).attr('y',this.options.markerHeight/2-10).attr('x',function(a){return g?f.x(a.value)-25:f.x(a.value)+15}).attr('xlink:href',function(a){return a.icon}).attr('width',20).attr('height',20);b.arrangeLabels(a,this.svg)}}],[{key:'arrangeLabels',value:function c(a,b){var d=b.node().getBoundingClientRect();a.selectAll('.marker-group__label--left').each(function(a,b,c){var e=c[b],f=e.getBoundingClientRect();f.left<=d.left&&bq(e).attr('transform','translate('+(f.width+20)+', '+f.height/1.1+')')});a.selectAll('.marker-group__label--right').each(function(a,b,c){var e=c[b],f=e.getBoundingClientRect();f.right>=d.right&&bq(e).attr('transform','translate(-'+(f.width+20)+', '+f.height/1.1+')')})}},{key:'parseData',value:function b(a){return a.map(function(a){a.colors=a.colors||['#f0f0f0','#555','#000'];return a})}},{key:'validateData',value:function b(a){var c=a.filter(function(a){return a.values&&a.values.length!==3});if(c.length){throw Error('invalid data: values needs three items.')}}}]);return b}(jg),jk=Math.PI,jl=2*jk,jm=1e-6,jn=jl-jm;function jo(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function jp(){return new jo}jo.prototype=jp.prototype={constructor:jo,moveTo:function(a,b){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+b)},closePath:function(){this._x1!==null&&(this._x1=this._x0, this._y1=this._y0,this._+="Z")},lineTo:function(a,b){this._+="L"+(this._x1=+a)+","+(this._y1=+b)},quadraticCurveTo:function(a,b,c,d){this._+="Q"+ +a+","+ +b+","+(this._x1=+c)+","+(this._y1=+d)},bezierCurveTo:function(a,b,c,d,e,f){this._+="C"+ +a+","+ +b+","+ +c+","+ +d+","+(this._x1=+e)+","+(this._y1=+f)},arcTo:function(a,b,c,d,e){a=+a, b=+b, c=+c, d=+d, e=+e;var f=this._x1,g=this._y1,h=c-a,i=d-b,j=f-a,k=g-b,l=j*j+k*k;if(e<0)throw new Error("negative radius: "+e);if(this._x1===null)this._+="M"+(this._x1=a)+","+(this._y1=b);else if(!(l>jm));else if(!(Math.abs(k*h-i*j)>jm)||!e)this._+="L"+(this._x1=a)+","+(this._y1=b);else{var m=c-f,n=d-g,o=h*h+i*i,p=m*m+n*n,q=Math.sqrt(o),r=Math.sqrt(l),s=e*Math.tan((jk-Math.acos((o+l-p)/(2*q*r)))/2),t=s/r,u=s/q;Math.abs(t-1)>jm&&(this._+="L"+(a+t*j)+","+(b+t*k));this._+="A"+e+","+e+",0,0,"+ +(k*m>j*n)+","+(this._x1=a+u*h)+","+(this._y1=b+u*i)}},arc:function(a,b,c,d,e,f){a=+a, b=+b, c=+c;var g=c*Math.cos(d),h=c*Math.sin(d),i=a+g,j=b+h,k=1^f,l=f?d-e:e-d;if(c<0)throw new Error("negative radius: "+c);this._x1===null?(this._+="M"+i+","+j):(Math.abs(this._x1-i)>jm||Math.abs(this._y1-j)>jm)&&(this._+="L"+i+","+j);if(!c)return;l<0&&(l=l%jl+jl);l>jn?(this._+="A"+c+","+c+",0,1,"+k+","+(a-g)+","+(b-h)+"A"+c+","+c+",0,1,"+k+","+(this._x1=i)+","+(this._y1=j)):l>jm&&(this._+="A"+c+","+c+",0,"+ +(l>=jk)+","+k+","+(this._x1=a+c*Math.cos(e))+","+(this._y1=b+c*Math.sin(e)))},rect:function(a,b,c,d){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+b)+"h"+ +c+"v"+ +d+"h"+-c+"Z"},toString:function(){return this._}};var ju=Math.max,jv=Math.min;function jM(a){return a<0?-1:1}function jN(a,b,c){var d=a._x1-a._x0,e=b-a._x1,f=(a._y1-a._y0)/(d||e<0&&-0),g=(c-a._y1)/(e||d<0&&-0),h=(f*e+g*d)/(d+e);return(jM(f)+jM(g))*Math.min(Math.abs(f),Math.abs(g),0.5*Math.abs(h))||0}function jO(a,b){var c=a._x1-a._x0;return c?(3*(a._y1-a._y0)/c-b)/2:b}function jP(a,b,c){var d=a._x0,e=a._y0,f=a._x1,g=a._y1,h=(f-d)/3;a._context.bezierCurveTo(d+h,e+h*b,f-h,g-h*c,f,g)}function jQ(a){this._context=a}jQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:jP(this,this._t0,jO(this,this._t0));break};(this._line||this._line!==0&&this._point===1)&&this._context.closePath();this._line=1-this._line},point:function(a,b){var c=NaN;a=+a, b=+b;if(a===this._x1&&b===this._y1)return;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;break;case 2:this._point=3;jP(this,jO(this,c=jN(this,a,b)),c);break;default:jP(this,this._t0,c=jN(this,a,b));break};this._x0=this._x1, this._x1=a;this._y0=this._y1, this._y1=b;this._t0=c}};function jR(a){this._context=new jS(a)}(jR.prototype=Object.create(jQ.prototype)).point=function(a,b){jQ.prototype.point.call(this,b,a)};function jS(a){this._context=a}jS.prototype={moveTo:function(a,b){this._context.moveTo(b,a)},closePath:function(){this._context.closePath()},lineTo:function(a,b){this._context.lineTo(b,a)},bezierCurveTo:function(a,b,c,d,e,f){this._context.bezierCurveTo(b,a,d,c,f,e)}};function jT(a,b){return b={exports:{}}, a(b,b.exports), b.exports}var jU={"aliceblue":[240,248,255],"antiquewhite":[250,235,215],"aqua":[0,255,255],"aquamarine":[127,255,212],"azure":[240,255,255],"beige":[245,245,220],"bisque":[255,228,196],"black":[0,0,0],"blanchedalmond":[255,235,205],"blue":[0,0,255],"blueviolet":[138,43,226],"brown":[165,42,42],"burlywood":[222,184,135],"cadetblue":[95,158,160],"chartreuse":[127,255,0],"chocolate":[210,105,30],"coral":[255,127,80],"cornflowerblue":[100,149,237],"cornsilk":[255,248,220],"crimson":[220,20,60],"cyan":[0,255,255],"darkblue":[0,0,139],"darkcyan":[0,139,139],"darkgoldenrod":[184,134,11],"darkgray":[169,169,169],"darkgreen":[0,100,0],"darkgrey":[169,169,169],"darkkhaki":[189,183,107],"darkmagenta":[139,0,139],"darkolivegreen":[85,107,47],"darkorange":[255,140,0],"darkorchid":[153,50,204],"darkred":[139,0,0],"darksalmon":[233,150,122],"darkseagreen":[143,188,143],"darkslateblue":[72,61,139],"darkslategray":[47,79,79],"darkslategrey":[47,79,79],"darkturquoise":[0,206,209],"darkviolet":[148,0,211],"deeppink":[255,20,147],"deepskyblue":[0,191,255],"dimgray":[105,105,105],"dimgrey":[105,105,105],"dodgerblue":[30,144,255],"firebrick":[178,34,34],"floralwhite":[255,250,240],"forestgreen":[34,139,34],"fuchsia":[255,0,255],"gainsboro":[220,220,220],"ghostwhite":[248,248,255],"gold":[255,215,0],"goldenrod":[218,165,32],"gray":[128,128,128],"green":[0,128,0],"greenyellow":[173,255,47],"grey":[128,128,128],"honeydew":[240,255,240],"hotpink":[255,105,180],"indianred":[205,92,92],"indigo":[75,0,130],"ivory":[255,255,240],"khaki":[240,230,140],"lavender":[230,230,250],"lavenderblush":[255,240,245],"lawngreen":[124,252,0],"lemonchiffon":[255,250,205],"lightblue":[173,216,230],"lightcoral":[240,128,128],"lightcyan":[224,255,255],"lightgoldenrodyellow":[250,250,210],"lightgray":[211,211,211],"lightgreen":[144,238,144],"lightgrey":[211,211,211],"lightpink":[255,182,193],"lightsalmon":[255,160,122],"lightseagreen":[32,178,170],"lightskyblue":[135,206,250],"lightslategray":[119,136,153],"lightslategrey":[119,136,153],"lightsteelblue":[176,196,222],"lightyellow":[255,255,224],"lime":[0,255,0],"limegreen":[50,205,50],"linen":[250,240,230],"magenta":[255,0,255],"maroon":[128,0,0],"mediumaquamarine":[102,205,170],"mediumblue":[0,0,205],"mediumorchid":[186,85,211],"mediumpurple":[147,112,219],"mediumseagreen":[60,179,113],"mediumslateblue":[123,104,238],"mediumspringgreen":[0,250,154],"mediumturquoise":[72,209,204],"mediumvioletred":[199,21,133],"midnightblue":[25,25,112],"mintcream":[245,255,250],"mistyrose":[255,228,225],"moccasin":[255,228,181],"navajowhite":[255,222,173],"navy":[0,0,128],"oldlace":[253,245,230],"olive":[128,128,0],"olivedrab":[107,142,35],"orange":[255,165,0],"orangered":[255,69,0],"orchid":[218,112,214],"palegoldenrod":[238,232,170],"palegreen":[152,251,152],"paleturquoise":[175,238,238],"palevioletred":[219,112,147],"papayawhip":[255,239,213],"peachpuff":[255,218,185],"peru":[205,133,63],"pink":[255,192,203],"plum":[221,160,221],"powderblue":[176,224,230],"purple":[128,0,128],"rebeccapurple":[102,51,153],"red":[255,0,0],"rosybrown":[188,143,143],"royalblue":[65,105,225],"saddlebrown":[139,69,19],"salmon":[250,128,114],"sandybrown":[244,164,96],"seagreen":[46,139,87],"seashell":[255,245,238],"sienna":[160,82,45],"silver":[192,192,192],"skyblue":[135,206,235],"slateblue":[106,90,205],"slategray":[112,128,144],"slategrey":[112,128,144],"snow":[255,250,250],"springgreen":[0,255,127],"steelblue":[70,130,180],"tan":[210,180,140],"teal":[0,128,128],"thistle":[216,191,216],"tomato":[255,99,71],"turquoise":[64,224,208],"violet":[238,130,238],"wheat":[245,222,179],"white":[255,255,255],"whitesmoke":[245,245,245],"yellow":[255,255,0],"yellowgreen":[154,205,50]},jV=function b(a){if(!a||typeof a==='string'){return !1}return a instanceof Array||Array.isArray(a)||a.length>=0&&(a.splice instanceof Function||Object.getOwnPropertyDescriptor(a,(a.length-1))&&a.constructor.name!=='String')},jW=jT(function(a){var b=Array.prototype.concat,c=Array.prototype.slice,d=a.exports=function d(a){var e=[];for(var f=0,g=a.length;f<g;f++){var h=a[f];jV(h)?(e=b.call(e,c.call(h))):e.push(h)}return e};d.wrap=function(a){return function(){return a(d(arguments))}}}),jX=jT(function(a){var b={};for(var c in jU)jU.hasOwnProperty(c)&&(b[jU[c]]=c);var d=a.exports={to:{},get:{}};d.get=function(a){var b=a.substring(0,3).toLowerCase(),c,e;switch(b){case 'hsl':c=d.get.hsl(a);e='hsl';break;case 'hwb':c=d.get.hwb(a);e='hwb';break;default:c=d.get.rgb(a);e='rgb';break};if(!c){return null}return{model:e,value:c}};d.get.rgb=function(a){if(!a){return null}var b=/^#([a-f0-9]{3,4})$/i,c=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,d=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,f=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,g=/(\D+)/,h=[0,0,0,1],i,j,k;if(i=a.match(c)){k=i[2];i=i[1];for(j=0;j<3;j++){var l=j*2;h[j]=parseInt(i.slice(l,l+2),16)}k&&(h[3]=Math.round(parseInt(k,16)/255*100)/100)}else if(i=a.match(b)){i=i[1];k=i[3];for(j=0;j<3;j++)h[j]=parseInt(i[j]+i[j],16);k&&(h[3]=Math.round(parseInt(k+k,16)/255*100)/100)}else if(i=a.match(d)){for(j=0;j<3;j++)h[j]=parseInt(i[j+1],0);i[4]&&(h[3]=parseFloat(i[4]))}else if(i=a.match(f)){for(j=0;j<3;j++)h[j]=Math.round(parseFloat(i[j+1])*2.55);i[4]&&(h[3]=parseFloat(i[4]))}else if(i=a.match(g)){if(i[1]==='transparent'){return[0,0,0,0]}h=jU[i[1]];if(!h){return null}h[3]=1;return h}else{return null};for(j=0;j<3;j++)h[j]=e(h[j],0,255);h[3]=e(h[3],0,1);return h};d.get.hsl=function(a){if(!a){return null}var b=/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,c=a.match(b);if(c){var d=parseFloat(c[4]),f=(parseFloat(c[1])+360)%360,g=e(parseFloat(c[2]),0,100),h=e(parseFloat(c[3]),0,100),i=e(isNaN(d)?1:d,0,1);return[f,g,h,i]}return null};d.get.hwb=function(a){if(!a){return null}var b=/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,c=a.match(b);if(c){var d=parseFloat(c[4]),f=(parseFloat(c[1])%360+360)%360,g=e(parseFloat(c[2]),0,100),h=e(parseFloat(c[3]),0,100),i=e(isNaN(d)?1:d,0,1);return[f,g,h,i]}return null};d.to.hex=function(){var a=jW(arguments);return'#'+f(a[0])+f(a[1])+f(a[2])+(a[3]<1?(f(Math.round(a[3]*255))):'')};d.to.rgb=function(){var a=jW(arguments);return a.length<4||a[3]===1?'rgb('+Math.round(a[0])+', '+Math.round(a[1])+', '+Math.round(a[2])+')':'rgba('+Math.round(a[0])+', '+Math.round(a[1])+', '+Math.round(a[2])+', '+a[3]+')'};d.to.rgb.percent=function(){var a=jW(arguments),b=Math.round(a[0]/255*100),c=Math.round(a[1]/255*100),d=Math.round(a[2]/255*100);return a.length<4||a[3]===1?'rgb('+b+'%, '+c+'%, '+d+'%)':'rgba('+b+'%, '+c+'%, '+d+'%, '+a[3]+')'};d.to.hsl=function(){var a=jW(arguments);return a.length<4||a[3]===1?'hsl('+a[0]+', '+a[1]+'%, '+a[2]+'%)':'hsla('+a[0]+', '+a[1]+'%, '+a[2]+'%, '+a[3]+')'};d.to.hwb=function(){var a=jW(arguments),b='';a.length>=4&&a[3]!==1&&(b=', '+a[3]);return'hwb('+a[0]+', '+a[1]+'%, '+a[2]+'%'+b+')'};d.to.keyword=function(a){return b[a.slice(0,3)]};function e(a,b,c){return Math.min(Math.max(b,a),c)}function f(a){var b=a.toString(16).toUpperCase();return b.length<2?'0'+b:b}}),j_=jT(function(a){var b={};for(var c in jU)jU.hasOwnProperty(c)&&(b[jU[c]]=c);var d=a.exports={rgb:{channels:3,labels:'rgb'},hsl:{channels:3,labels:'hsl'},hsv:{channels:3,labels:'hsv'},hwb:{channels:3,labels:'hwb'},cmyk:{channels:4,labels:'cmyk'},xyz:{channels:3,labels:'xyz'},lab:{channels:3,labels:'lab'},lch:{channels:3,labels:'lch'},hex:{channels:1,labels:['hex']},keyword:{channels:1,labels:['keyword']},ansi16:{channels:1,labels:['ansi16']},ansi256:{channels:1,labels:['ansi256']},hcg:{channels:3,labels:['h','c','g']},apple:{channels:3,labels:['r16','g16','b16']},gray:{channels:1,labels:['gray']}};for(var e in d){if(d.hasOwnProperty(e)){if(!('channels' in d[e])){throw new Error('missing channels property: '+e)}if(!('labels' in d[e])){throw new Error('missing channel labels property: '+e)}if(d[e].labels.length!==d[e].channels){throw new Error('channel and label counts mismatch: '+e)}var f=d[e].channels,g=d[e].labels;delete d[e].channels;delete d[e].labels;Object.defineProperty(d[e],'channels',{value:f});Object.defineProperty(d[e],'labels',{value:g})}}d.rgb.hsl=function(a){var b=a[0]/255,c=a[1]/255,d=a[2]/255,e=Math.min(b,c,d),f=Math.max(b,c,d),g=f-e,h,i,j;f===e?(h=0):b===f?(h=(c-d)/g):c===f?(h=2+(d-b)/g):d===f&&(h=4+(b-c)/g);h=Math.min(h*60,360);h<0&&(h+=360);j=(e+f)/2;f===e?(i=0):j<=0.5?(i=g/(f+e)):(i=g/(2-f-e));return[h,i*100,j*100]};d.rgb.hsv=function(a){var b=a[0],c=a[1],d=a[2],e=Math.min(b,c,d),f=Math.max(b,c,d),g=f-e,h,i,j;f===0?(i=0):(i=g/f*1000/10);f===e?(h=0):b===f?(h=(c-d)/g):c===f?(h=2+(d-b)/g):d===f&&(h=4+(b-c)/g);h=Math.min(h*60,360);h<0&&(h+=360);j=f/255*1000/10;return[h,i,j]};d.rgb.hwb=function(a){var b=a[0],c=a[1],e=a[2],f=d.rgb.hsl(a)[0],g=0.00392156862745098*Math.min(b,Math.min(c,e));e=1-0.00392156862745098*Math.max(b,Math.max(c,e));return[f,g*100,e*100]};d.rgb.cmyk=function(a){var b=a[0]/255,c=a[1]/255,d=a[2]/255,e,f,g,h;h=Math.min(1-b,1-c,1-d);e=(1-b-h)/(1-h)||0;f=(1-c-h)/(1-h)||0;g=(1-d-h)/(1-h)||0;return[e*100,f*100,g*100,h*100]};function h(a,b){return Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2)+Math.pow(a[2]-b[2],2)}d.rgb.keyword=function(a){var c=b[a];if(c){return c}var d=Infinity,e;for(var f in jU){if(jU.hasOwnProperty(f)){var g=jU[f],i=h(a,g);i<d&&(d=i,e=f)}}return e};d.keyword.rgb=function(a){return jU[a]};d.rgb.xyz=function(a){var b=a[0]/255,c=a[1]/255,d=a[2]/255;b=b>0.04045?Math.pow(((b+0.055)/1.055),2.4):b/12.92;c=c>0.04045?Math.pow(((c+0.055)/1.055),2.4):c/12.92;d=d>0.04045?Math.pow(((d+0.055)/1.055),2.4):d/12.92;var e=b*0.4124+c*0.3576+d*0.1805,f=b*0.2126+c*0.7152+d*0.0722,g=b*0.0193+c*0.1192+d*0.9505;return[e*100,f*100,g*100]};d.rgb.lab=function(a){var b=d.rgb.xyz(a),c=b[0],e=b[1],f=b[2],g,h,i;c/=95.047;e/=100;f/=108.883;c=c>0.008856?Math.pow(c,0.3333333333333333):7.787*c+0.13793103448275862;e=e>0.008856?Math.pow(e,0.3333333333333333):7.787*e+0.13793103448275862;f=f>0.008856?Math.pow(f,0.3333333333333333):7.787*f+0.13793103448275862;g=116*e-16;h=500*(c-e);i=200*(e-f);return[g,h,i]};d.hsl.rgb=function(a){var b=a[0]/360,c=a[1]/100,d=a[2]/100,e,f,g,h,i;if(c===0){i=d*255;return[i,i,i]}d<0.5?(f=d*(1+c)):(f=d+c-d*c);e=2*d-f;h=[0,0,0];for(var j=0;j<3;j++)g=b+0.3333333333333333*-(j-1),g<0&&g++,g>1&&g--,6*g<1?(i=e+(f-e)*6*g):2*g<1?(i=f):3*g<2?(i=e+(f-e)*(0.6666666666666666-g)*6):(i=e),h[j]=i*255;return h};d.hsl.hsv=function(a){var b=a[0],c=a[1]/100,d=a[2]/100,e=c,f=Math.max(d,0.01),g,h;d*=2;c*=d<=1?d:2-d;e*=f<=1?f:2-f;h=(d+c)/2;g=d===0?2*e/(f+e):2*c/(d+c);return[b,g*100,h*100]};d.hsv.rgb=function(a){var b=a[0]/60,c=a[1]/100,d=a[2]/100,e=Math.floor(b)%6,f=b-Math.floor(b),g=255*d*(1-c),h=255*d*(1-c*f),i=255*d*(1-c*(1-f));d*=255;switch(e){case 0:return[d,i,g];case 1:return[h,d,g];case 2:return[g,d,i];case 3:return[g,h,d];case 4:return[i,g,d];case 5:return[d,g,h]}};d.hsv.hsl=function(a){var b=a[0],c=a[1]/100,d=a[2]/100,e=Math.max(d,0.01),f,g,h;h=(2-c)*d;f=(2-c)*e;g=c*e;g/=f<=1?f:2-f;g=g||0;h/=2;return[b,g*100,h*100]};d.hwb.rgb=function(a){var b=a[0]/360,c=a[1]/100,d=a[2]/100,e=c+d,f,g,h,i;e>1&&(c/=e,d/=e);f=Math.floor(6*b);g=1-d;h=6*b-f;(f&0x01)!==0&&(h=1-h);i=c+h*(g-c);var j,k,l;switch(f){default:;case 6:;case 0:j=g;k=i;l=c;break;case 1:j=i;k=g;l=c;break;case 2:j=c;k=g;l=i;break;case 3:j=c;k=i;l=g;break;case 4:j=i;k=c;l=g;break;case 5:j=g;k=c;l=i;break};return[j*255,k*255,l*255]};d.cmyk.rgb=function(a){var b=a[0]/100,c=a[1]/100,d=a[2]/100,e=a[3]/100,f,g,h;f=1-Math.min(1,b*(1-e)+e);g=1-Math.min(1,c*(1-e)+e);h=1-Math.min(1,d*(1-e)+e);return[f*255,g*255,h*255]};d.xyz.rgb=function(a){var b=a[0]/100,c=a[1]/100,d=a[2]/100,e,f,g;e=b*3.2406+c*-1.5372+d*-0.4986;f=b*-0.9689+c*1.8758+d*0.0415;g=b*0.0557+c*-0.204+d*1.0570;e=e>0.0031308?1.055*Math.pow(e,0.4166666666666667)-0.055:e*12.92;f=f>0.0031308?1.055*Math.pow(f,0.4166666666666667)-0.055:f*12.92;g=g>0.0031308?1.055*Math.pow(g,0.4166666666666667)-0.055:g*12.92;e=Math.min(Math.max(0,e),1);f=Math.min(Math.max(0,f),1);g=Math.min(Math.max(0,g),1);return[e*255,f*255,g*255]};d.xyz.lab=function(a){var b=a[0],c=a[1],d=a[2],e,f,g;b/=95.047;c/=100;d/=108.883;b=b>0.008856?Math.pow(b,0.3333333333333333):7.787*b+0.13793103448275862;c=c>0.008856?Math.pow(c,0.3333333333333333):7.787*c+0.13793103448275862;d=d>0.008856?Math.pow(d,0.3333333333333333):7.787*d+0.13793103448275862;e=116*c-16;f=500*(b-c);g=200*(c-d);return[e,f,g]};d.lab.xyz=function(a){var b=a[0],c=a[1],d=a[2],e,f,g;f=(b+16)/116;e=c/500+f;g=f-d/200;var h=Math.pow(f,3),i=Math.pow(e,3),j=Math.pow(g,3);f=h>0.008856?h:(f-0.13793103448275862)/7.787;e=i>0.008856?i:(e-0.13793103448275862)/7.787;g=j>0.008856?j:(g-0.13793103448275862)/7.787;e*=95.047;f*=100;g*=108.883;return[e,f,g]};d.lab.lch=function(a){var b=a[0],c=a[1],d=a[2],e,f,g;e=Math.atan2(d,c);f=e*360/2/Math.PI;f<0&&(f+=360);g=Math.sqrt(c*c+d*d);return[b,g,f]};d.lch.lab=function(a){var b=a[0],c=a[1],d=a[2],e,f,g;g=d/360*2*Math.PI;e=c*Math.cos(g);f=c*Math.sin(g);return[b,e,f]};d.rgb.ansi16=function(a){var b=a[0],c=a[1],e=a[2],f=1 in arguments?arguments[1]:d.rgb.hsv(a)[2];f=Math.round(f/50);if(f===0){return 30}var g=30+(Math.round(e/255)<<2|Math.round(c/255)<<1|Math.round(b/255));f===2&&(g+=60);return g};d.hsv.ansi16=function(a){return d.rgb.ansi16(d.hsv.rgb(a),a[2])};d.rgb.ansi256=function(a){var b=a[0],c=a[1],d=a[2];if(b===c&&c===d){if(b<8){return 16}if(b>248){return 231}return Math.round((b-8)/247*24)+232}var e=16+36*Math.round(b/255*5)+6*Math.round(c/255*5)+Math.round(d/255*5);return e};d.ansi16.rgb=function(a){var b=a%10;if(b===0||b===7){a>50&&(b+=3.5);b=b/10.5*255;return[b,b,b]}var c=(~~(a>50)+1)*0.5,d=(b&1)*c*255,e=(b>>1&1)*c*255,f=(b>>2&1)*c*255;return[d,e,f]};d.ansi256.rgb=function(a){if(a>=232){var b=(a-232)*10+8;return[b,b,b]}a-=16;var c,d=Math.floor(a/36)/5*255,e=Math.floor((c=a%36)/6)/5*255,f=c%6/5*255;return[d,e,f]};d.rgb.hex=function(a){var b=((Math.round(a[0])&0xFF)<<16)+((Math.round(a[1])&0xFF)<<8)+(Math.round(a[2])&0xFF),c=b.toString(16).toUpperCase();return'000000'.substring(c.length)+c};d.hex.rgb=function(a){var b=a.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!b){return[0,0,0]}var c=b[0];b[0].length===3&&(c=c.split('').map(function(a){return a+a}).join(''));var d=parseInt(c,16),e=d>>16&0xFF,f=d>>8&0xFF,g=d&0xFF;return[e,f,g]};d.rgb.hcg=function(a){var b=a[0]/255,c=a[1]/255,d=a[2]/255,e=Math.max(Math.max(b,c),d),f=Math.min(Math.min(b,c),d),g=e-f,h,i;g<1?(h=f/(1-g)):(h=0);g<=0?(i=0):e===b?(i=(c-d)/g%6):e===c?(i=2+(d-b)/g):(i=4+(b-c)/g+4);i/=6;i%=1;return[i*360,g*100,h*100]};d.hsl.hcg=function(a){var b=a[1]/100,c=a[2]/100,d=1,e=0;c<0.5?(d=2.0*b*c):(d=2.0*b*(1.0-c));d<1.0&&(e=(c-0.5*d)/(1.0-d));return[a[0],d*100,e*100]};d.hsv.hcg=function(a){var b=a[1]/100,c=a[2]/100,d=b*c,e=0;d<1.0&&(e=(c-d)/(1-d));return[a[0],d*100,e*100]};d.hcg.rgb=function(a){var b=a[0]/360,c=a[1]/100,d=a[2]/100;if(c===0.0){return[d*255,d*255,d*255]}var e=[0,0,0],f=b%1*6,g=f%1,h=1-g,i=0;switch(Math.floor(f)){case 0:e[0]=1;e[1]=g;e[2]=0;break;case 1:e[0]=h;e[1]=1;e[2]=0;break;case 2:e[0]=0;e[1]=1;e[2]=g;break;case 3:e[0]=0;e[1]=h;e[2]=1;break;case 4:e[0]=g;e[1]=0;e[2]=1;break;default:e[0]=1;e[1]=0;e[2]=h};i=(1.0-c)*d;return[(c*e[0]+i)*255,(c*e[1]+i)*255,(c*e[2]+i)*255]};d.hcg.hsv=function(a){var b=a[1]/100,c=a[2]/100,d=b+c*(1.0-b),e=0;d>0.0&&(e=b/d);return[a[0],e*100,d*100]};d.hcg.hsl=function(a){var b=a[1]/100,c=a[2]/100,d=c*(1.0-b)+0.5*b,e=0;d>0.0&&d<0.5?(e=b/(2*d)):d>=0.5&&d<1.0&&(e=b/(2*(1-d)));return[a[0],e*100,d*100]};d.hcg.hwb=function(a){var b=a[1]/100,c=a[2]/100,d=b+c*(1.0-b);return[a[0],(d-b)*100,(1-d)*100]};d.hwb.hcg=function(a){var b=a[1]/100,c=a[2]/100,d=1-c,e=d-b,f=0;e<1&&(f=(d-e)/(1-e));return[a[0],e*100,f*100]};d.apple.rgb=function(a){return[a[0]/65535*255,a[1]/65535*255,a[2]/65535*255]};d.rgb.apple=function(a){return[a[0]/255*65535,a[1]/255*65535,a[2]/255*65535]};d.gray.rgb=function(a){return[a[0]/100*255,a[0]/100*255,a[0]/100*255]};d.gray.hsl=d.gray.hsv=function(a){return[0,0,a[0]]};d.gray.hwb=function(a){return[0,100,a[0]]};d.gray.cmyk=function(a){return[0,0,0,a[0]]};d.gray.lab=function(a){return[a[0],0,0]};d.gray.hex=function(a){var b=Math.round(a[0]/100*255)&0xFF,c=(b<<16)+(b<<8)+b,d=c.toString(16).toUpperCase();return'000000'.substring(d.length)+d};d.rgb.gray=function(a){var b=(a[0]+a[1]+a[2])/3;return[b/255*100]}});function ko(){var a={},b=Object.keys(j_);for(var c=b.length,d=0;d<c;d++)a[b[d]]={distance:-1,parent:null};return a}function kp(a){var b=ko(),c=[a];b[a].distance=0;while(c.length){var d=c.pop(),e=Object.keys(j_[d]);for(var f=e.length,g=0;g<f;g++){var h=e[g],i=b[h];i.distance===-1&&(i.distance=b[d].distance+1,i.parent=d,c.unshift(h))}}return b}function kq(a,b){return function(c){return b(a(c))}}function kr(a,b){var c=[b[a].parent,a],d=j_[b[a].parent][a],e=b[a].parent;while(b[e].parent)c.unshift(b[e].parent),d=kq(j_[b[e].parent][e],d),e=b[e].parent;d.conversion=c;return d}var ks=function(a){var b=kp(a),c={},d=Object.keys(b);for(var e=d.length,f=0;f<e;f++){var g=d[f],h=b[g];if(h.parent===null){continue}c[g]=kr(g,b)}return c},kt={},ku=Object.keys(j_);function kv(a){var b=function(b){if(b===undefined||b===null){return b}arguments.length>1&&(b=Array.prototype.slice.call(arguments));return a(b)};'conversion' in a&&(b.conversion=a.conversion);return b}function kw(a){var b=function(b){if(b===undefined||b===null){return b}arguments.length>1&&(b=Array.prototype.slice.call(arguments));var c=a(b);if(typeof c==='object'){for(var d=c.length,e=0;e<d;e++)c[e]=Math.round(c[e])}return c};'conversion' in a&&(b.conversion=a.conversion);return b}ku.forEach(function(a){kt[a]={};Object.defineProperty(kt[a],'channels',{value:j_[a].channels});Object.defineProperty(kt[a],'labels',{value:j_[a].labels});var b=ks(a),c=Object.keys(b);c.forEach(function(c){var d=b[c];kt[a][c]=kw(d);kt[a][c].raw=kv(d)})});var kx=kt,ky=[].slice,kz=['keyword','gray','hex'],kA={};Object.keys(kx).forEach(function(a){kA[ky.call(kx[a].labels).sort().join('')]=a});var kB={};function kC(a,b){if(!(this instanceof kC)){return new kC(a,b)}b&&b in kz&&(b=null);if(b&&!(b in kx)){throw new Error('Unknown model: '+b)}var c,d;if(typeof a==='undefined')this.model='rgb',this.color=[0,0,0],this.valpha=1;else if(a instanceof kC)this.model=a.model,this.color=a.color.slice(),this.valpha=a.valpha;else if(typeof a==='string'){var e=jX.get(a);if(e===null){throw new Error('Unable to parse color from string: '+a)}this.model=e.model;d=kx[this.model].channels;this.color=e.value.slice(0,d);this.valpha=typeof e.value[d]==='number'?e.value[d]:1}else if(a.length){this.model=b||'rgb';d=kx[this.model].channels;var f=ky.call(a,0,d);this.color=kI(f,d);this.valpha=typeof a[d]==='number'?a[d]:1}else if(typeof a==='number')a&=0xFFFFFF,this.model='rgb',this.color=[a>>16&0xFF,a>>8&0xFF,a&0xFF],this.valpha=1;else{this.valpha=1;var g=Object.keys(a);'alpha' in a&&(g.splice(g.indexOf('alpha'),1),this.valpha=typeof a.alpha==='number'?a.alpha:0);var h=g.sort().join('');if(!(h in kA)){throw new Error('Unable to parse color from object: '+JSON.stringify(a))}this.model=kA[h];var i=kx[this.model].labels,j=[];for(c=0;c<i.length;c++)j.push(a[i[c]]);this.color=kI(j)};if(kB[this.model]){d=kx[this.model].channels;for(c=0;c<d;c++){var k=kB[this.model][c];k&&(this.color[c]=k(this.color[c]))}}this.valpha=Math.max(0,Math.min(1,this.valpha));Object.freeze&&Object.freeze(this)}kC.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(a){var b=this.model in jX.to?this:this.rgb();b=b.round(typeof a==='number'?a:1);var c=b.valpha===1?b.color:b.color.concat(this.valpha);return jX.to[b.model](c)},percentString:function(a){var b=this.rgb().round(typeof a==='number'?a:1),c=b.valpha===1?b.color:b.color.concat(this.valpha);return jX.to.rgb.percent(c)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){var a={},b=kx[this.model].channels,c=kx[this.model].labels;for(var d=0;d<b;d++)a[c[d]]=this.color[d];this.valpha!==1&&(a.alpha=this.valpha);return a},unitArray:function(){var a=this.rgb().color;a[0]/=255;a[1]/=255;a[2]/=255;this.valpha!==1&&a.push(this.valpha);return a},unitObject:function(){var a=this.rgb().object();a.r/=255;a.g/=255;a.b/=255;this.valpha!==1&&(a.alpha=this.valpha);return a},round:function(a){a=Math.max(a||0,0);return new kC(this.color.map(kE(a)).concat(this.valpha),this.model)},alpha:function(a){if(arguments.length){return new kC(this.color.concat(Math.max(0,Math.min(1,a))),this.model)}return this.valpha},red:kF('rgb',0,kG(255)),green:kF('rgb',1,kG(255)),blue:kF('rgb',2,kG(255)),hue:kF(['hsl','hsv','hsl','hwb','hcg'],0,function(a){return(a%360+360)%360}),saturationl:kF('hsl',1,kG(100)),lightness:kF('hsl',2,kG(100)),saturationv:kF('hsv',1,kG(100)),value:kF('hsv',2,kG(100)),chroma:kF('hcg',1,kG(100)),gray:kF('hcg',2,kG(100)),white:kF('hwb',1,kG(100)),wblack:kF('hwb',2,kG(100)),cyan:kF('cmyk',0,kG(100)),magenta:kF('cmyk',1,kG(100)),yellow:kF('cmyk',2,kG(100)),black:kF('cmyk',3,kG(100)),x:kF('xyz',0,kG(100)),y:kF('xyz',1,kG(100)),z:kF('xyz',2,kG(100)),l:kF('lab',0,kG(100)),a:kF('lab',1),b:kF('lab',2),keyword:function(a){if(arguments.length){return new kC(a)}return kx[this.model].keyword(this.color)},hex:function(a){if(arguments.length){return new kC(a)}return jX.to.hex(this.rgb().round().color)},rgbNumber:function(){var a=this.rgb().color;return(a[0]&0xFF)<<16|(a[1]&0xFF)<<8|a[2]&0xFF},luminosity:function(){var a=this.rgb().color,b=[];for(var c=0;c<a.length;c++){var d=a[c]/255;b[c]=d<=0.03928?d/12.92:Math.pow(((d+0.055)/1.055),2.4)}return 0.2126*b[0]+0.7152*b[1]+0.0722*b[2]},contrast:function(a){var b=this.luminosity(),c=a.luminosity();if(b>c){return(b+0.05)/(c+0.05)}return(c+0.05)/(b+0.05)},level:function(a){var b=this.contrast(a);if(b>=7.1){return'AAA'}return b>=4.5?'AA':''},isDark:function(){var a=this.rgb().color,b=(a[0]*299+a[1]*587+a[2]*114)/1000;return b<128},isLight:function(){return!this.isDark()},negate:function(){var a=this.rgb();for(var b=0;b<3;b++)a.color[b]=255-a.color[b];return a},lighten:function(a){var b=this.hsl();b.color[2]+=b.color[2]*a;return b},darken:function(a){var b=this.hsl();b.color[2]-=b.color[2]*a;return b},saturate:function(a){var b=this.hsl();b.color[1]+=b.color[1]*a;return b},desaturate:function(a){var b=this.hsl();b.color[1]-=b.color[1]*a;return b},whiten:function(a){var b=this.hwb();b.color[1]+=b.color[1]*a;return b},blacken:function(a){var b=this.hwb();b.color[2]+=b.color[2]*a;return b},grayscale:function(){var a=this.rgb().color,b=a[0]*0.3+a[1]*0.59+a[2]*0.11;return kC.rgb(b,b,b)},fade:function(a){return this.alpha(this.valpha-this.valpha*a)},opaquer:function(a){return this.alpha(this.valpha+this.valpha*a)},rotate:function(a){var b=this.hsl(),c=b.color[0];c=(c+a)%360;c=c<0?360+c:c;b.color[0]=c;return b},mix:function(a,b){var c=a.rgb(),d=this.rgb(),e=b===undefined?0.5:b,f=2*e-1,g=c.alpha()-d.alpha(),h=((f*g===-1?f:(f+g)/(1+f*g))+1)/2.0,i=1-h;return kC.rgb(h*c.red()+i*d.red(),h*c.green()+i*d.green(),h*c.blue()+i*d.blue(),c.alpha()*e+d.alpha()*(1-e))}};Object.keys(kx).forEach(function(a){if(kz.indexOf(a)!==-1){return}var b=kx[a].channels;kC.prototype[a]=function(){if(this.model===a){return new kC(this)}if(arguments.length){return new kC(arguments,a)}var c=typeof arguments[b]==='number'?b:this.valpha;return new kC(kH(kx[this.model][a].raw(this.color)).concat(c),a)};kC[a]=function(c){typeof c==='number'&&(c=kI(ky.call(arguments),b));return new kC(c,a)}});function kD(a,b){return Number(a.toFixed(b))}function kE(a){return function(b){return kD(b,a)}}function kF(a,b,c){a=Array.isArray(a)?a:[a];a.forEach(function(a){(kB[a]||(kB[a]=[]))[b]=c});a=a[0];return function(d){var e;if(arguments.length){c&&(d=c(d));e=this[a]();e.color[b]=d;return e}e=this[a]().color[b];c&&(e=c(e));return e}}function kG(a){return function(b){return Math.max(0,Math.min(a,b))}}function kH(a){return Array.isArray(a)?a:[a]}function kI(a,b){for(var c=0;c<b;c++)typeof a[c]!=='number'&&(a[c]=0);return a}var kJ=kC;function kK(a){return a/Math.PI*180}function kL(a,b,c){return cf(0,b,1).map(function(d){return kJ(a).mix(kJ('#fff'),c/100*d/b)})}var kM=function(c){je(e,c);function e(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};jb(this,e);var b=jf(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));b.defaultOptions={container:null,innerRadius:50,innerMargin:100,labelOffset:10,data:[],rows:[],rowLabels:[],columns:'',sortBy:!1,colorSteps:5,lightnessFactor:80,strokeColor:'#fff',strokeWidth:0.5,hoverStrokeColor:'#111',hoverStrokeWidth:2,hoverOpacity:0.5,legendLabelTop:'Fragility',legendLabelLeft:'Severe',legendLabelRight:'Minor'};b.activeRow=null;b.init(a);return b}jc(e,[{key:'render',value:function c(){var e=this,f=this.options,g=f.container,h=f.innerRadius,j=f.innerMargin,k=f.data,l=f.labelOffset,m=f.rows,n=f.rowColors,o=f.rowLabels,p=f.columns,q=f.colorSteps,r=f.lightnessFactor,u=f.sortBy,w=u?k.sort(function(a,b){return b[u]-a[u]}):k,x=bq(g),y=x.node().clientWidth;x.selectAll('.oecd-chart__svg').remove();var z=x.append('svg').classed('OECDCharts__RadialBarChart',!0).classed('oecd-chart__svg',!0).attr('width',y).attr('height',y).append('g'),A=z.append('g').attr('transform','translate('+y/2+', '+y/2+')'),B=y/2,C=B-j,D=C-h,E=D/m.length,F=Math.PI*1.5/w.length,I=function b(a){return a*(500/w.length)},K=m.map(function(a,b){var c=kL(n[b],q,r),e=ce(k,function(b){return+b[a]});return et().domain(e).range(c.slice(0).reverse())}),L=A.selectAll('.arc-group').data(w).enter().append('g').classed('arc-group',!0).on('mouseenter',this.handleGroupMouseEnter(this)).on('mouseleave',this.handleGroupMouseLeave.bind(this));L.append('g').attr('transform',function(a,b){var c=b*F+F/2-Math.PI/2,d=C+l,e=d*Math.cos(c),f=d*Math.sin(c);return'translate('+e+', '+f+')'}).append('text').text(function(a,b){return a[p]}).attr('transform',function(a,b){var c=b*F+F/2-Math.PI/2,d=c>Math.PI/2?kK(c+Math.PI):kK(c);return'rotate('+d+')'}).attr('dominant-baseline','middle').filter(function(a,b){return b*F+F/2-Math.PI/2>Math.PI/2}).attr('text-anchor','end');L.attr('opacity',0).transition().duration(0).delay(function(a,b){return I(b)}).attr('opacity',1);var N=z.append('g').classed('legend-group',!0).attr('transform','translate(0, '+j+')'),O=N.selectAll('.legend-row').data(o).enter().append('g').attr('transform',function(a,b){return'translate(50, '+E*b+')'}).classed('legend-row',!0).classed('is-active',function(a,b){return b===e.activeRow}).on('click',function(a,b,c,d){e.activeRow=b;e.options.sortBy=m[b];e.event.emit('sort',e.options.sortBy);e.update(e.options)}),P=O.append('text').text(function(a){return a}).classed('row-label',!0),Q=cm(P.nodes(),function(a){return a.getBoundingClientRect().width}),R=B-Q-80,S=~~Q+20;P.attr('x',~~Q+10).attr('text-anchor','end').attr('alignment-baseline','middle').attr('dominant-baseline','middle');var T=O.append('g').classed('legend-color-blocks',!0).attr('transform','translate('+S+', 0)'),U=R/q,V=Math.min(E,30),W=Math.max(0,(E-V)/2);P.attr('y',W+V/2);T.selectAll('.color-block').data(function(a,b){return K[b].range().slice(0).reverse()}).enter().append('rect').classed('color-block',!0).attr('x',function(a,b){return b*U}).attr('y',W).attr('width',U).attr('height',V).attr('fill',function(a,b){return a});N.append('text').classed('legend-label',!0).attr('x',S+50).attr('y',W-5).text(this.options.legendLabelTop).attr('dominant-baseline','baseline');var X=T.filter(function(a,b){return b===T.size()-1});X.append('text').classed('legend-label',!0).attr('y',W+V+5).attr('dominant-baseline','hanging').text(this.options.legendLabelLeft);X.append('text').classed('legend-label',!0).attr('text-anchor','end').attr('dominant-baseline','hanging').attr('y',W+V+5).attr('x',U*K.length).text(this.options.legendLabelRight);this.arcGroups=L}},{key:'update',value:function a(){var b=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.options=jd({},this.options,b);this.render()}},{key:'handleGroupMouseEnter',value:function b(a){return function(b,c){this.parentNode.appendChild(this);a.arcGroups.style('opacity',a.options.hoverOpacity).filter(function(a,b){return c===b}).style('opacity',1);a.event.emit('mouseenter.group',b)}}},{key:'handleGroupMouseLeave',value:function c(a,b){this.arcGroups.style('opacity',1);this.event.emit('mouseleave.group',a)}}]);return e}(jg);u.PearlChart=jh;u.StackedChart=ji;u.BoxPlot=jj;u.RadialBarChart=kM;Object.defineProperty(u,'__esModule',{value:!0})}))
//# sourceMappingURL=oecd-simple-charts.min.js.map
